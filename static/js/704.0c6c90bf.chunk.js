"use strict";(self.webpackChunkhr_start_up_admin_panel=self.webpackChunkhr_start_up_admin_panel||[]).push([[704],{1970:function(n,e,t){t.d(e,{o:function(){return l}});var i=t(4925),r=t(5671),s=t(3144),a=t(46),o=["id"],l=function(){function n(){(0,r.Z)(this,n)}return(0,s.Z)(n,null,[{key:"fetchPosts",value:function(n){return a.e.get("/admin/posts",{params:n})}},{key:"fetchPostDetail",value:function(n){return a.e.get("/admin/posts/".concat(n))}},{key:"banPost",value:function(n){var e=n.id,t=(0,i.Z)(n,o);return a.e.post("/admin/posts/ban/".concat(e),t)}},{key:"unbanPost",value:function(n){return a.e.post("/admin/posts/unban/".concat(n))}},{key:"deletePost",value:function(n){return a.e.delete("/admin/posts/".concat(n))}}]),n}()},5602:function(n,e,t){t.d(e,{L:function(){return i},Z:function(){return r}});var i=function(n){return n.CREATED_AT="createdAt",n.VIEWS="views",n}({}),r=function(n){return n.DESC="desc",n.ASC="asc",n}({})},278:function(n,e,t){t.d(e,{V:function(){return c}});var i,r=t(168),s=t(6444).ZP.div(i||(i=(0,r.Z)(["\n  display: flex;\n  padding: 4px 6px;\n  border-radius: 6px;\n"]))),a=t(6886),o=t(5033),l=t(184),c=function(n){var e=n.tag;return(0,l.jsx)(s,{style:a.i[(0,o.be)(e.id.slice(-1),a.i.length)],children:e.value})}},5704:function(n,e,t){t.r(e),t.d(e,{default:function(){return On}});var i,r,s,a,o,l,c,u,d,p,x,f,v,h,m,g,Z,j,b,y,w,C,N,k,P,D,I,R,W=t(2791),E=t(168),S=t(6444),A=t(2450),O=S.ZP.div(i||(i=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 24px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n"]))),L=S.ZP.div(r||(r=(0,E.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-auto-rows: max-content;\n  grid-gap: 14px;\n  width: 100%;\n  height: fit-content;\n  overflow-x: auto;\n"]))),z=S.ZP.div(s||(s=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n"]))),G=S.ZP.div(a||(a=(0,E.Z)(["\n  --min-width: 231px;\n  grid-gap: 16px;\n  display: grid;\n  grid-template-columns: 231px 231px 231px 340px;\n  width: 100%;\n  padding: 16px;\n  background: ",";\n  box-shadow: 0 7px 15px rgba(0,0,0,.05);\n  border-radius: 10px;\n"])),A.D.white),_=t(5033),F=S.ZP.div(o||(o=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  width: 100%;\n  padding: 10px;\n  border-radius: 5px;\n  border: 1px solid ",";\n  background: ",";\n  cursor: pointer;\n  transition: background-color .3s;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n"])),A.D.lightGray40,A.D.white,A.D.lightGray40,A.D.lightGray20),T=S.ZP.div(l||(l=(0,E.Z)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n"]))),M=S.ZP.div(c||(c=(0,E.Z)(["\n  display: flex;\n  width: fit-content;\n  gap: 10px;\n  align-items: center;\n"]))),V=(S.ZP.div(u||(u=(0,E.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),A.D.gray70),S.ZP.div(d||(d=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 15px;\n  font-weight: 500;\n"])))),H=S.ZP.div(p||(p=(0,E.Z)(["\n  display: flex;\n  padding: 5px;\n  border-radius: 5px;\n  font-size: 12px;\n  color: ",";\n  background-color: ",";\n"])),A.D.white,A.D.blue60),q=S.ZP.div(x||(x=(0,E.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),A.D.gray90),J=t(184),U=function(n){var e=n.complaint,t=n.onClick;return(0,J.jsxs)(F,{onClick:t,children:[(0,J.jsxs)(T,{children:[(0,J.jsxs)(V,{children:["# ",e.id,e.unreadableMessages&&(0,J.jsx)(H,{children:e.unreadableMessages})]}),(0,J.jsxs)(M,{children:[(0,J.jsx)(_.Xy,{type:e.type}),(0,J.jsx)(_.dc,{status:e.status})]})]}),(0,J.jsxs)(M,{children:[(0,J.jsx)(_.qE,{firstName:e.author.firstName,lastName:e.author.lastName,src:e.author.avatar,userId:e.author.id}),e.author.lastName," ",e.author.firstName," (",e.author.email,")"]}),(0,J.jsx)(q,{children:e.text})]})},B=t(3433),Q=t(4165),X=t(5861),K=t(9439),Y=t(3131),$=S.ZP.div(f||(f=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  min-height: 100%;\n  height: fit-content;\n"]))),nn=S.ZP.div(v||(v=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),en=S.ZP.div(h||(h=(0,E.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),tn=(S.ZP.div(m||(m=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),S.ZP.div(g||(g=(0,E.Z)(["\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: center;\n"]))),S.ZP.div(Z||(Z=(0,E.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"])))),rn=S.ZP.div(j||(j=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  background-color: ",";\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color .3s;\n  \n  &:hover {\n    background-color: ",";\n  }\n"])),A.D.lightGray20,A.D.lightGray50),sn=S.ZP.div(b||(b=(0,E.Z)(["\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  position: relative;\n\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n"]))),an=S.ZP.div(y||(y=(0,E.Z)(["\n  position: absolute;\n  cursor: pointer;\n  bottom: 76px;\n  left: calc(50% - 69px);\n  display: flex;\n  padding: 4px 8px;\n  border-radius: 5px;\n  color: ",";\n  background-color: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n\n  &:active,\n  &.active {\n    background-color: ",";\n  }\n"])),A.D.lightGray10,A.D.blue60,A.D.blue70,A.D.blue80),on=S.ZP.div(w||(w=(0,E.Z)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  min-height: 500px;\n  height: 100%;\n  max-height: 600px;\n  background-color: ",";\n  border-radius: 8px;\n"])),A.D.lightGray10),ln=S.ZP.div(C||(C=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  gap: 10px;\n  width: 100%;\n  height: fit-content;\n  min-height: 100%;\n  padding: 10px;\n"]))),cn=S.ZP.form(N||(N=(0,E.Z)(["\n  display: flex;\n  width: 100%;\n  height: fit-content;\n  gap: 10px;\n  align-items: center;\n  padding: 10px;\n  border-top: 1px solid ",";\n"])),A.D.lightGray40),un=S.ZP.button(k||(k=(0,E.Z)(["\n  background: transparent;\n"]))),dn=(0,S.ZP)(Y.I)(P||(P=(0,E.Z)(["\n  cursor: pointer;\n  color: ",";\n  transition: color .3s;\n  \n  &:hover {\n    color: ",";\n  }\n"])),A.D.gray60,A.D.blue60),pn=(S.ZP.div(D||(D=(0,E.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),A.D.gray70),S.ZP.div(I||(I=(0,E.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),A.D.gray90),t(5457)),xn=t(9514),fn=t(595),vn=t(5859),hn=t(5671),mn=t(3144),gn=t(46),Zn=function(){function n(){(0,hn.Z)(this,n)}return(0,mn.Z)(n,null,[{key:"fetchComplaints",value:function(n){return gn.e.get("/complaints",{params:n})}},{key:"fetchResolveComplaint",value:function(n){return gn.e.post("/complaints/resolve/".concat(n))}},{key:"fetchComplaint",value:function(n){return gn.e.get("/complaints/".concat(n))}},{key:"fetchCloseComplaint",value:function(n){return gn.e.post("/complaints/close/".concat(n))}},{key:"fetchUnresolveComplaint",value:function(n){return gn.e.post("/complaints/unresolve/".concat(n))}}]),n}(),jn=t(4469),bn=t(2375),yn=t(7319),wn=t(5705),Cn=t(9847),Nn=t(1219),kn=t(3494),Pn=t(9973),Dn=function(n){var e=n.onClose,t=n.refetch,i=n.complaintId,r=(0,W.useState)(),s=(0,K.Z)(r,2),a=s[0],o=s[1],l=(0,W.useState)([]),c=(0,K.Z)(l,2),u=c[0],d=c[1],p=(0,kn.aC)().user,x=(0,W.useState)(!1),f=(0,K.Z)(x,2),v=f[0],h=f[1],m=(0,W.useState)(!1),g=(0,K.Z)(m,2),Z=g[0],j=g[1],b=(0,jn.te)(),y=(0,jn.te)(),w=(0,jn.te)(),C=(0,W.useState)(),N=(0,K.Z)(C,2),k=N[0],P=N[1],D=(0,W.useState)(),I=(0,K.Z)(D,2),R=I[0],E=I[1],S=(0,W.useState)(!1),A=(0,K.Z)(S,2),O=A[0],L=A[1],z=(0,W.useRef)(null),G=function(){var n,e;null===(n=z.current)||void 0===n||n.scrollTo(0,null===(e=z.current)||void 0===e?void 0:e.scrollHeight)},F=(0,wn.TA)({initialValues:{message:""},onSubmit:function(n){q(n.message)}}),T=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var e;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j(!0),n.next=4,Zn.fetchComplaint(i);case 4:e=n.sent,o(e.data),d(e.data.messages),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,xn._N)(n.t0);case 12:return n.prev=12,j(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),M=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var r;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchResolveComplaint(i);case 4:r=n.sent,(0,xn.x9)(r.data.message),t(),y.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),V=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var r;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchCloseComplaint(i);case 4:r=n.sent,(0,xn.x9)(r.data.message),t(),b.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),H=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var r;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchUnresolveComplaint(i);case 4:r=n.sent,(0,xn.x9)(r.data.message),t(),w.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),q=function(n){Cn.v.sendComplaintMessage({complaintId:i,text:n}),F.resetForm()};(0,W.useEffect)((function(){T()}),[i]),(0,jn.ie)((function(n){var e,t,r,s=JSON.parse(n);s.event===Nn.u.COMPLAINT_MESSAGE&&s.complaintId===i&&(d((function(n){return[].concat((0,B.Z)(n),[s])})),s.user.id!==(null===p||void 0===p?void 0:p.id)&&(Cn.v.readMessage({messageId:s.id}),z.current&&(null===(e=z.current)||void 0===e?void 0:e.scrollHeight)-(null===(t=z.current)||void 0===t?void 0:t.clientHeight)-(null===(r=z.current)||void 0===r?void 0:r.scrollTop)>=50&&L(!0)))}),[i,p]),(0,W.useLayoutEffect)((function(){if(z.current){var n,e,t,i=u[u.length-1],r=(null===(n=z.current)||void 0===n?void 0:n.scrollHeight)-(null===(e=z.current)||void 0===e?void 0:e.clientHeight)-(null===(t=z.current)||void 0===t?void 0:t.scrollTop);(i&&i.user.id===(null===p||void 0===p?void 0:p.id)||r<50)&&G()}}),[u]);var U=(0,W.useMemo)((function(){return u.length?u.map((function(n){return(0,J.jsx)(Pn.v,{message:n},n.id)})):"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}),[u]);return(0,J.jsxs)(_.Bm,{titleText:a&&(0,J.jsxs)(nn,{children:[(0,J.jsx)(en,{children:(0,J.jsxs)(_.g2,{tooltip:!0,children:["# ",a.id]})}),(0,J.jsx)(_.Xy,{type:a.type}),(0,J.jsx)(_.dc,{status:a.status})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,J.jsx)($,{children:Z||!a?(0,J.jsx)(_.QP,{}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.bW,{text:"ID:",info:(0,J.jsx)(J.Fragment,{children:a.id})}),(0,J.jsx)(_.bW,{text:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435:",info:(0,J.jsx)(J.Fragment,{children:a.text})}),(0,J.jsx)(_.bW,{text:"\u0410\u0432\u0442\u043e\u0440:",info:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.qE,{firstName:a.author.firstName,lastName:a.author.lastName,src:a.author.avatar,userId:a.author.id}),a.author.lastName," ",a.author.firstName," (",a.author.email,")"]})}),(0,J.jsx)(_.bW,{text:"\u0416\u0430\u043b\u043e\u0431\u0430 \u043d\u0430 ".concat(a.type===vn.pM.POST?"\u043f\u043e\u0441\u0442":"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",":"),info:a.type===vn.pM.POST?(0,J.jsxs)(rn,{onClick:function(){var n;E(null===a||void 0===a||null===(n=a.post)||void 0===n?void 0:n.id)},children:[a.post.title," (",a.post.id,")"]}):(0,J.jsxs)(rn,{onClick:function(){var n;P(null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n.id)},children:[(0,J.jsx)(_.qE,{firstName:a.user.firstName,lastName:a.user.lastName,src:a.user.avatar,userId:a.user.id}),a.user.lastName," ",a.user.firstName," (",a.user.email,")"]})}),(0,J.jsx)(_.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,fn.h)(a.createdAt)}),(0,J.jsx)(_.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,fn.h)(a.updatedAt)}),a.whoResolve&&(0,J.jsx)(_.bW,{text:"\u041a\u0442\u043e ".concat(a.status===vn.P5.RESOLVED?"\u0440\u0435\u0448\u0438\u043b":"\u0437\u0430\u043a\u0440\u044b\u043b",":"),info:(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.qE,{firstName:a.whoResolve.firstName,lastName:a.whoResolve.lastName,src:a.whoResolve.avatar,userId:a.whoResolve.id}),a.whoResolve.lastName," ",a.whoResolve.firstName," (",a.whoResolve.email,")"]})}),(0,J.jsxs)(on,{children:[(0,J.jsx)(sn,{ref:z,onScroll:function(){var n,e,t;z.current&&((null===(n=z.current)||void 0===n?void 0:n.scrollHeight)-(null===(e=z.current)||void 0===e?void 0:e.clientHeight)-(null===(t=z.current)||void 0===t?void 0:t.scrollTop)<25&&L(!1))},children:(0,J.jsx)(ln,{children:U})}),O&&(0,J.jsx)(an,{onClick:G,children:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),(0,J.jsxs)(cn,{onSubmit:F.handleSubmit,children:[(0,J.jsx)(_.gx,{name:"message",value:F.values.message,onChange:F.handleChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onEnter:function(){return q(F.values.message)}}),(0,J.jsx)(un,{children:(0,J.jsx)(dn,{type:"send",size:Y.J.XL})})]})]}),(0,J.jsx)(tn,{children:a.status===vn.P5.RESOLVED||a.status===vn.P5.CLOSED?(0,J.jsx)(_.zx,{fullWidth:!0,text:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c",onClick:w.open}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(_.zx,{fullWidth:!0,onClick:y.open,text:"\u0420\u0435\u0448\u0438\u0442\u044c"}),(0,J.jsx)(_.zx,{fullWidth:!0,onClick:b.open,variant:_.Wu.DANGER,text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})})]})}),y.isOpen&&(0,J.jsxs)(pn.V,{type:pn.w.INFO,closeHandler:y.close,onConfirm:M,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:y.close},submit:{isLoading:v,text:"\u0420\u0435\u0448\u0438\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'" \u0440\u0435\u0448\u0435\u043d\u043d\u043e\u0439?']}),b.isOpen&&(0,J.jsxs)(pn.V,{type:pn.w.WARNING,closeHandler:b.close,onConfirm:V,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:b.close},submit:{isLoading:v,text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'"?']}),w.isOpen&&(0,J.jsxs)(pn.V,{type:pn.w.WARNING,closeHandler:w.close,onConfirm:H,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:w.close},submit:{isLoading:v,text:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'"?']}),k&&(0,J.jsx)(bn.K,{userId:k,onClose:function(){P(void 0)}}),R&&(0,J.jsx)(yn.l,{postId:R,onClose:function(){E(void 0)}})]})},In=t(1413),Rn=t(4942),Wn=t(5602),En=(0,Rn.Z)({},vn.yT.CREATED_AT,(R={},(0,Rn.Z)(R,Wn.Z.ASC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435"),(0,Rn.Z)(R,Wn.Z.DESC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),R)),Sn=Object.values(vn.yT).reduce((function(n,e){return[].concat((0,B.Z)(n),(0,B.Z)(Object.values(Wn.Z).map((function(n){return{value:"".concat(e,"_").concat(n),label:En[e][n],meta:{key:e,value:n}}}))))}),[]),An=function(){var n=(0,W.useState)(),e=(0,K.Z)(n,2),t=e[0],i=e[1],r=(0,W.useState)(!0),s=(0,K.Z)(r,2),a=s[0],o=s[1],l=(0,W.useState)([]),c=(0,K.Z)(l,2),u=c[0],d=c[1],p=(0,kn.aC)().user,x=(0,wn.TA)({initialValues:{sort:Sn[0]},onSubmit:function(){}}),f=(0,jn.UV)();(0,W.useEffect)((function(){f.getUsers()}),[]),(0,W.useEffect)((function(){v()}),[x.values.users,x.values.status,x.values.sort,x.values.types]),(0,jn.ie)((function(n){var e=JSON.parse(n);e.event===Nn.u.COMPLAINT_MESSAGE&&d((function(n){return n.map((function(n){return n.id===e.complaintId&&(null===p||void 0===p?void 0:p.id)!==e.user.id&&(null===t||void 0===t?void 0:t.id)!==e.complaintId&&(n.unreadableMessages+=1),(0,In.Z)({},n)}))}))}),[u,p]);var v=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var e,t,i,r,s,a,l,c;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),i=x.values,r=i.users,s=i.status,a=i.sort,l=i.types,n.next=5,Zn.fetchComplaints({user:null===r||void 0===r?void 0:r.value,status:null===s||void 0===s?void 0:s.value,type:null===l||void 0===l?void 0:l.value,sort:null===(e=a.meta)||void 0===e?void 0:e.key,sortValue:null===(t=a.meta)||void 0===t?void 0:t.value});case 5:c=n.sent,d(c.data),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,xn._N)(n.t0);case 12:return n.prev=12,o(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),h=(0,W.useMemo)((function(){return f.users.map((function(n){return{value:n.id,label:n.email,customize:{avatarSrc:n.avatar,avatarFirstName:n.firstName,avatarLastName:n.lastName}}}))}),[f.users]),m=(0,W.useMemo)((function(){return Object.values(vn.P5).map((function(n){return{value:n,label:n}}))}),[]),g=(0,W.useMemo)((function(){return Object.values(vn.pM).map((function(n){return{value:n,label:_.ab[n]}}))}),[]);return{form:x,activeComplaint:t,setActiveComplaint:function(n){n&&d((function(e){return e.map((function(e){return e.id===n.id?(0,In.Z)((0,In.Z)({},e),{},{unreadableMessages:0}):e}))})),i(n)},usersOptions:h,typesOptions:g,usersRes:f,sortOptions:Sn,complaints:u,statusOptions:m,createSelectChangeHandler:function(n){return function(e){x.setFieldValue(n,e)}},isLoading:a,getComplaints:v,reset:function(){x.resetForm()}}},On=function(){var n=An(),e=n.form,t=n.getComplaints,i=n.complaints,r=n.typesOptions,s=n.usersOptions,a=n.usersRes,o=n.createSelectChangeHandler,l=n.isLoading,c=n.statusOptions,u=n.sortOptions,d=n.reset,p=n.setActiveComplaint,x=n.activeComplaint,f=(0,W.useMemo)((function(){return l?(0,J.jsx)(_.QP,{}):i.length?(0,J.jsx)(L,{children:i.map((function(n){return(0,J.jsx)(U,{complaint:n,onClick:function(){return p(n)}},n.id)}))}):(0,J.jsx)(z,{children:"\u0416\u0430\u043b\u043e\u0431 \u043d\u0435\u0442"})}),[i,l]);return(0,J.jsxs)(O,{children:[(0,J.jsx)(_.mr,{title:"\u0416\u0430\u043b\u043e\u0431\u044b",count:"".concat(i.length," \u0436\u0430\u043b\u043e\u0431")}),(0,J.jsxs)(G,{children:[(0,J.jsx)(_.Ph,{value:e.values.types,options:r,onChange:o("types"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430 \u0447\u0442\u043e \u0436\u0430\u043b\u043e\u0431\u0430"}),(0,J.jsx)(_.Ph,{value:e.values.users,options:s,loading:a.isLoading,onChange:o("users"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430"}),(0,J.jsx)(_.Ph,{value:e.values.status,options:c,onChange:o("status"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,J.jsx)(_.Ph,{value:e.values.sort,options:u,onChange:o("sort"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"}),(0,J.jsx)(_.zx,{text:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",onClick:d})]}),f,x&&(0,J.jsx)(Dn,{complaintId:x.id,onClose:function(){return p(void 0)},refetch:t})]})}},9973:function(n,e,t){t.d(e,{v:function(){return N}});var i,r,s,a,o,l=t(2791),c=t(168),u=t(6444),d=t(2450),p=t(4075),x=u.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  position: relative;\n  width: 100%;\n  justify-content: ",";\n"])),(function(n){return n.isOwn?"flex-end":"flex-start"})),f=u.ZP.div(r||(r=(0,c.Z)(["\n  display: flex;\n  align-items: flex-end;\n  position: relative;\n  gap: 10px;\n  width: fit-content;\n  height: fit-content;\n  padding: 8px 8px 4px 8px;\n  max-width: calc(50% - 10px);\n  border-radius: 5px;\n  background-color: ",";\n"])),(function(n){return n.isOwn?d.D.blue30:d.D.lightGray30})),v=(0,u.ZP)(p.L)(s||(s=(0,c.Z)(["\n  width: 200px;\n  top: -43px !important;\n  left: -150px;\n  \n  & > div {\n    background: ",";\n  }\n"])),d.D.blue20),h=u.ZP.div(a||(a=(0,c.Z)(["\n  padding-bottom: 5px;\n"]))),m=u.ZP.div(o||(o=(0,c.Z)(["\n  color: ","\n"])),d.D.gray90),g=t(595),Z=t(3494),j=t(5033),b=t(5457),y=t(4469),w=t(9847),C=t(184),N=function(n){var e=n.message,t=(0,Z.aC)().user,i=(0,l.useRef)(null),r=(0,y.te)(),s=(0,y.te)(),a=(0,l.useMemo)((function(){return e.user.id===(null===t||void 0===t?void 0:t.id)}),[e,t]);return(0,C.jsxs)(x,{isOwn:a,children:[(0,C.jsxs)(f,{ref:i,isOwn:a,onContextMenu:function(n){"dialogId"in e&&(n.preventDefault(),a&&s.open())},children:[(0,C.jsx)(h,{children:e.text}),(0,C.jsx)(m,{children:(0,g.B)(e.updatedAt)}),s.isOpen&&(0,C.jsx)(v,{selectionContainer:i.current,onClose:s.close,children:(0,C.jsx)(j.zx,{variant:j.Wu.DANGER,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",fullWidth:!0,onClick:r.open})})]}),r.isOpen&&(0,C.jsx)(b.V,{type:b.w.WARNING,closeHandler:r.close,onConfirm:function(){"dialogId"in e&&(w.v.deleteMessage({messageId:e.id}),r.close())},actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:r.close},submit:{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}},children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"})]})}},7319:function(n,e,t){t.d(e,{l:function(){return X}});var i,r,s,a,o,l,c,u,d,p,x,f,v,h,m,g=t(4165),Z=t(5861),j=t(9439),b=t(2791),y=t(168),w=t(6444),C=t(2450),N=t(6710),k=w.ZP.div(i||(i=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  min-height: 100%;\n  height: fit-content;\n"]))),P=w.ZP.div(r||(r=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),D=w.ZP.div(s||(s=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  text-align: left;\n"]))),I=w.ZP.div(a||(a=(0,y.Z)(["\n  text-align: center;\n"]))),R=w.ZP.div(o||(o=(0,y.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),W=(w.ZP.div(l||(l=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),w.ZP.div(c||(c=(0,y.Z)(["\n  font-size: 24px;\n"]))),w.ZP.div(u||(u=(0,y.Z)(["\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: center;\n"])))),E=w.ZP.div(d||(d=(0,y.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),S=((0,w.ZP)(N.Z)(p||(p=(0,y.Z)(["\n  width: 100% !important;\n"]))),w.ZP.div(x||(x=(0,y.Z)(["\n  font-size: 17px;\n  padding-bottom: 5px;\n  border-bottom: 1px solid ",";\n"])),C.D.lightGray40)),A=w.ZP.div(f||(f=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),O=w.ZP.div(v||(v=(0,y.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),C.D.gray70),L=w.ZP.div(h||(h=(0,y.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),C.D.gray90),z=w.ZP.div(m||(m=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  border-radius: 6px;\n  padding: 6px;\n  color: ",";\n  background-color: ",";\n"])),C.D.red90,C.D.red30),G=t(5033),_=t(7518),F=t(4469),T=t(5457),M=t(9514),V=t(1970),H=t(278),q=t(595),J=t(3131),U=t(3494),B=t(5639),Q=t(184),X=function(n){var e=n.onClose,t=n.refetch,i=n.postId,r=(0,U.aC)().user,s=(0,b.useState)(),a=(0,j.Z)(s,2),o=a[0],l=a[1],c=(0,b.useState)(!1),u=(0,j.Z)(c,2),d=u[0],p=u[1],x=(0,F.te)(),f=(0,F.te)(),v=(0,b.useState)(""),h=(0,j.Z)(v,2),m=h[0],y=h[1],w=(null===r||void 0===r?void 0:r.roles.map((function(n){return n.value})).includes(B.G.ADMIN))||!1,C=(null===o||void 0===o?void 0:o.status)===_.J.ACTIVE,N=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var e;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V.o.fetchPostDetail(i);case 3:e=n.sent,l(e.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),(0,M._N)(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),X=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var i,r;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!o){n.next=17;break}if(p(!0),!C){n.next=10;break}return n.next=6,V.o.banPost({id:o.id,text:m});case 6:i=n.sent,(0,M.x9)(i.data.message),n.next=14;break;case 10:return n.next=12,V.o.unbanPost(o.id);case 12:r=n.sent,(0,M.x9)(r.data.message);case 14:null===t||void 0===t||t(),x.close(),e();case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),(0,M._N)(n.t0);case 22:return n.prev=22,p(!1),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[0,19,22,25]])})));return function(){return n.apply(this,arguments)}}(),K=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var r;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!o){n.next=10;break}return p(!0),n.next=5,V.o.deletePost(i);case 5:r=n.sent,(0,M.x9)(r.data.message),null===t||void 0===t||t(),f.close(),e();case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),(0,M._N)(n.t0);case 15:return n.prev=15,p(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(){return n.apply(this,arguments)}}();return(0,b.useEffect)((function(){N()}),[i]),(0,Q.jsxs)(G.Bm,{titleText:o&&(0,Q.jsxs)(P,{children:[(0,Q.jsx)(R,{children:(0,Q.jsxs)(G.g2,{tooltip:!0,children:[o.title," (",o.id,")"]})}),(0,Q.jsx)(G.qb,{status:o.status}),(0,Q.jsxs)(O,{children:[(0,Q.jsx)(J.I,{type:"eye",size:J.J.LG}),o.views]}),(0,Q.jsxs)(O,{children:[(0,Q.jsx)(J.I,{type:"star-filled",size:J.J.LG}),o.favoriteCount]}),(0,Q.jsxs)(O,{children:[(0,Q.jsx)(J.I,{type:"message",size:J.J.LG}),o.commentsCount]})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,Q.jsx)(k,{children:o?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(G.bW,{text:"ID:",info:(0,Q.jsx)(Q.Fragment,{children:o.id})}),(0,Q.jsx)(G.bW,{text:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",info:(0,Q.jsx)(Q.Fragment,{children:o.title})}),(0,Q.jsx)(G.bW,{text:"\u0410\u0432\u0442\u043e\u0440:",info:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(G.qE,{firstName:o.user.firstName,lastName:o.user.lastName,src:o.user.avatar}),o.user.lastName," ",o.user.firstName," (",o.user.email,")"]})}),(0,Q.jsx)(G.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,q.h)(null===o||void 0===o?void 0:o.createdAt)}),(0,Q.jsx)(G.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,q.h)(null===o||void 0===o?void 0:o.updatedAt)}),(0,Q.jsx)(G.bW,{text:"\u0422\u0435\u0433\u0438:",info:(0,Q.jsx)(W,{children:o.tags.map((function(n){return(0,Q.jsx)(H.V,{tag:n},n.id)}))})}),(0,Q.jsx)(G.bW,{text:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,Q.jsx)(L,{children:o.shortDescription})}),(0,Q.jsx)(G.bW,{text:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,Q.jsx)(L,{children:o.description})}),o.banReason&&(0,Q.jsx)(G.bW,{text:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438:",info:(0,Q.jsx)(z,{children:o.banReason.text})}),o.banReason&&(0,Q.jsx)(G.bW,{text:"\u041a\u0442\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b:",info:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(G.qE,{firstName:o.banReason.user.firstName,lastName:o.banReason.user.lastName,src:o.banReason.user.avatar}),o.banReason.user.lastName," ",o.banReason.user.firstName," (",o.banReason.user.email,")"]})}),(0,Q.jsx)(G.Y7,{url:o.videoUrl}),(0,Q.jsxs)(A,{children:[(0,Q.jsx)(S,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),o.comments.map((function(n){return(0,Q.jsx)(G.sv,{comment:n},n.id)}))]}),(0,Q.jsxs)(E,{children:[[_.J.BANNED,_.J.DELETED].includes(o.status)&&w&&(0,Q.jsx)(G.zx,{fullWidth:!0,onClick:f.open,variant:G.Wu.DANGER,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,Q.jsx)(G.zx,{fullWidth:!0,onClick:x.open,variant:C?G.Wu.DANGER:G.Wu.FILLED,text:C?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}):(0,Q.jsx)(G.QP,{})}),x.isOpen&&(0,Q.jsx)(T.V,{type:C?T.w.WARNING:T.w.ANSWER,closeHandler:x.close,onConfirm:X,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:x.close},submit:{isLoading:d,text:C?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}},children:(0,Q.jsxs)(D,{children:[(0,Q.jsxs)(I,{children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ",C?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c",' \u043f\u043e\u0441\u0442 "',null===o||void 0===o?void 0:o.title,'"?']}),C&&(0,Q.jsx)(G.II,{value:m,onChange:function(n){return y(n.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443"})]})}),f.isOpen&&(0,Q.jsxs)(T.V,{type:T.w.WARNING,closeHandler:f.close,onConfirm:K,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:f.close},submit:{isLoading:d,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442 "',null===o||void 0===o?void 0:o.title,'"?']})]})}},2375:function(n,e,t){t.d(e,{K:function(){return Q}});var i,r,s,a,o,l,c,u,d,p,x,f,v,h=t(4165),m=t(5861),g=t(9439),Z=t(2791),j=t(168),b=t(6444),y=t(2450),w=t(5033),C=b.ZP.div(i||(i=(0,j.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  min-height: 100%;\n  height: fit-content;\n"]))),N=(0,b.ZP)(w.gx)(r||(r=(0,j.Z)(["\n  width: 100%;\n  text-align: left;\n"]))),k=b.ZP.form(s||(s=(0,j.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  grid-row-gap: 24px;\n"]))),P=b.ZP.div(a||(a=(0,j.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  text-align: left;\n"]))),D=b.ZP.div(o||(o=(0,j.Z)(["\n  text-align: center;\n"]))),I=b.ZP.div(l||(l=(0,j.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),R=b.ZP.div(c||(c=(0,j.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),W=b.ZP.div(u||(u=(0,j.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  grid-gap: 10px;\n"]))),E=b.ZP.div(d||(d=(0,j.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),S=b.ZP.div(p||(p=(0,j.Z)(["\n  display: flex;\n  color: ",";\n    padding: 5px;\n    border-radius: 5px;\n    background-color: ",";\n"])),y.D.gray90,y.D.lightGray10),A=b.ZP.div(x||(x=(0,j.Z)(["\n  font-size: 24px;\n"]))),O=b.ZP.div(f||(f=(0,j.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),L=b.ZP.div(v||(v=(0,j.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  border-radius: 6px;\n  padding: 6px;\n  color: ",";\n  background-color: ",";\n"])),y.D.red90,y.D.red30),z=t(7518),G=t(4469),_=t(5457),F=t(5591),T=t(9514),M=t(595),V=t(5705),H=t(7834),q=t(5204),J=t(5639),U=t(7512),B=t(184),Q=function(n){var e=n.onClose,t=n.refetch,i=n.userId,r=(0,Z.useState)(),s=(0,g.Z)(r,2),a=s[0],o=s[1],l=(0,U._)().createDialog,c=(0,Z.useState)(!1),u=(0,g.Z)(c,2),d=u[0],p=u[1],x=(0,Z.useState)(!1),f=(0,g.Z)(x,2),v=f[0],j=f[1],b=(0,Z.useState)(!1),y=(0,g.Z)(b,2),Q=y[0],X=y[1],K=(0,Z.useState)(""),Y=(0,g.Z)(K,2),$=Y[0],nn=Y[1],en=(0,Z.useState)(""),tn=(0,g.Z)(en,2),rn=tn[0],sn=tn[1],an=(0,G.te)(),on=(0,G.te)(),ln=(0,Z.useState)(!0),cn=(0,g.Z)(ln,2),un=cn[0],dn=cn[1],pn=(0,Z.useState)([]),xn=(0,g.Z)(pn,2),fn=xn[0],vn=xn[1],hn=(0,q.E)().execIf,mn=(0,V.TA)({initialValues:{roles:(null===a||void 0===a?void 0:a.roles.map((function(n){return{value:n.id,label:n.value}})))||[]},onSubmit:function(){var n=(0,m.Z)((0,h.Z)().mark((function n(e,r){var s;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.resetForm,n.prev=1,X(!0),n.next=5,F._.changeRoles({roles:e.roles.map((function(n){return n.value})),userId:i});case 5:null===t||void 0===t||t(),p(!1),s(),(0,T.x9)("\u0420\u043e\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),(0,T._N)(n.t0);case 14:return n.prev=14,X(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(e,t){return n.apply(this,arguments)}}()}),gn=(null===a||void 0===a?void 0:a.status)===z.J.ACTIVE,Zn=function(){var n=(0,m.Z)((0,h.Z)().mark((function n(){var e,t;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j(!0),n.next=4,F._.fetchUser(i);case 4:return t=n.sent,n.next=7,mn.setFieldValue("roles",null===(e=t.data)||void 0===e?void 0:e.roles.map((function(n){return{value:n.id,label:n.value}})));case 7:o(t.data),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),(0,T._N)(n.t0);case 13:return n.prev=13,j(!1),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])})));return function(){return n.apply(this,arguments)}}(),jn=function(){var n=(0,m.Z)((0,h.Z)().mark((function n(){var r,s;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,j(!0),!gn){n.next=9;break}return n.next=5,F._.banUser({id:i,text:$});case 5:r=n.sent,(0,T.x9)(r.data.message),n.next=13;break;case 9:return n.next=11,F._.unbanUser(i);case 11:s=n.sent,(0,T.x9)(s.data.message);case 13:null===t||void 0===t||t(),an.close(),e(),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),(0,T._N)(n.t0);case 21:return n.prev=21,j(!1),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[0,18,21,24]])})));return function(){return n.apply(this,arguments)}}(),bn=function(){var n=(0,m.Z)((0,h.Z)().mark((function n(){var e;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,dn(!0),n.next=4,H.m.fetchRoles();case 4:e=n.sent,vn(e.data.map((function(n){return{value:n.id,label:n.value}}))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),(0,T.Hn)(n.t0,mn);case 11:return n.prev=11,dn(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(){return n.apply(this,arguments)}}(),yn=function(n){mn.setFieldValue("roles",n)};(0,Z.useEffect)((function(){bn(),Zn()}),[]);var wn=function(){p(!1),mn.resetForm()},Cn=function(){p(!0),mn.setFieldValue("roles",null===a||void 0===a?void 0:a.roles.map((function(n){return{value:n.id,label:n.value}})))},Nn=(0,Z.useMemo)((function(){return v||!a?(0,B.jsx)(w.QP,{}):d?(0,B.jsxs)(k,{onSubmit:mn.handleSubmit,children:[(0,B.jsx)(w.Ph,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u0438",caption:"\u0420\u043e\u043b\u0438",multi:!0,options:fn,loading:un,value:mn.values.roles,onChange:yn}),(0,B.jsxs)(O,{children:[(0,B.jsx)(w.zx,{text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",fullWidth:!0,isLoading:Q}),(0,B.jsx)(w.zx,{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",variant:w.Wu.OUTLINE,fullWidth:!0,onClick:wn})]})]}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(W,{children:[(0,B.jsx)(w.qE,{userId:null===a||void 0===a?void 0:a.id,firstName:null===a||void 0===a?void 0:a.firstName,lastName:null===a||void 0===a?void 0:a.lastName,src:null===a||void 0===a?void 0:a.avatar,size:w.DZ.EXTRA,figure:"square"}),(0,B.jsxs)(A,{children:[null===a||void 0===a?void 0:a.lastName," ",null===a||void 0===a?void 0:a.firstName]}),(0,B.jsx)(w.qb,{status:null===a||void 0===a?void 0:a.status})]}),(0,B.jsx)(w.bW,{text:"ID:",info:null===a||void 0===a?void 0:a.id}),(0,B.jsx)(w.bW,{text:"\u0420\u043e\u043b\u0438:",info:(0,B.jsx)(E,{children:null===a||void 0===a?void 0:a.roles.map((function(n){return(0,B.jsx)(w.uU,{role:n.value},n.id)}))})}),(0,B.jsx)(w.bW,{text:"\u041f\u043e\u0447\u0442\u0430:",info:(0,B.jsx)(S,{children:null===a||void 0===a?void 0:a.email})}),(0,B.jsx)(w.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,M.h)(null===a||void 0===a?void 0:a.createdAt)}),(0,B.jsx)(w.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,M.h)(null===a||void 0===a?void 0:a.updatedAt)}),a.banReason&&(0,B.jsx)(w.bW,{text:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438:",info:(0,B.jsx)(L,{children:a.banReason.text})}),a.banReason&&(0,B.jsx)(w.bW,{text:"\u041a\u0442\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b:",info:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(w.qE,{firstName:a.banReason.user.firstName,lastName:a.banReason.user.lastName,src:a.banReason.user.avatar}),a.banReason.user.lastName," ",a.banReason.user.firstName," (",a.banReason.user.email,")"]})}),(0,B.jsxs)(O,{children:[hn(J.G.ADMIN,(0,B.jsx)(w.zx,{text:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u043e\u043b\u0438",fullWidth:!0,onClick:Cn})),(0,B.jsx)(w.zx,{fullWidth:!0,onClick:an.open,variant:gn?w.Wu.DANGER:w.Wu.FILLED,text:gn?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}),[d,gn,a,Q,mn,un,fn,v]);return(0,B.jsxs)(w.Bm,{titleText:(0,B.jsxs)(I,{children:[(0,B.jsx)(R,{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),(0,B.jsx)(w.zx,{text:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onClick:on.open})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,B.jsx)(C,{children:Nn}),an.isOpen&&(0,B.jsx)(_.V,{type:gn?_.w.WARNING:_.w.ANSWER,closeHandler:an.close,onConfirm:jn,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:an.close},submit:{isLoading:v,text:gn?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}},children:(0,B.jsxs)(P,{children:[(0,B.jsxs)(D,{children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ",gn?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"," \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",null===a||void 0===a?void 0:a.lastName," ",null===a||void 0===a?void 0:a.firstName," (",null===a||void 0===a?void 0:a.email,")?"]}),gn&&(0,B.jsx)(w.II,{value:$,onChange:function(n){return nn(n.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443"})]})}),on.isOpen&&(0,B.jsx)(_.V,{type:_.w.INFO,closeHandler:on.close,onConfirm:function(){l({userId:i,text:rn})},title:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:on.close},submit:{isLoading:v,text:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}},children:(0,B.jsx)(N,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",value:rn,onChange:function(n){return sn(n.target.value)}})})]})}},5204:function(n,e,t){t.d(e,{E:function(){return r}});var i=t(3494),r=function(){var n=(0,i.aC)().user;return{execIf:function(e,t){return null!==n&&void 0!==n&&n.roles.map((function(n){return n.value})).includes(e)?t:null}}}}}]);
//# sourceMappingURL=704.0c6c90bf.chunk.js.map