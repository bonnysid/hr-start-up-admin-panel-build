"use strict";(self.webpackChunkhr_start_up_admin_panel=self.webpackChunkhr_start_up_admin_panel||[]).push([[979],{7834:function(n,e,r){r.d(e,{m:function(){return l}});var t=r(5671),i=r(3144),a=r(46),l=function(){function n(){(0,t.Z)(this,n)}return(0,i.Z)(n,null,[{key:"fetchRoles",value:function(){return a.e.get("/admin/roles")}},{key:"fetchCreateRole",value:function(n){return a.e.post("/admin/roles/create",{value:n})}},{key:"fetchDeleteRole",value:function(n){return a.e.delete("/admin/roles/".concat(n))}},{key:"fetchUpdateRole",value:function(n,e){return a.e.put("/admin/roles/".concat(n),{value:e})}},{key:"fetchRole",value:function(n){return a.e.get("/admin/roles/".concat(n))}}]),n}()},5457:function(n,e,r){r.d(e,{V:function(){return P},w:function(){return C}});var t,i,a,l,o,s,u,c,d=r(1413),p=(r(2791),r(3131)),f=r(2986),x=r(168),h=r(6444),v=r(2450),m=h.ZP.div(t||(t=(0,x.Z)(["\n  display: flex;\n  justify-content: space-evenly;\n  gap: 16px;\n"]))),g=(0,h.ZP)(f.zx)(i||(i=(0,x.Z)(["\n  width: 50%;\n"]))),Z=h.ZP.div(a||(a=(0,x.Z)(["\n  padding: 56px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n"]))),j=h.ZP.div(l||(l=(0,x.Z)(["\n  width: 56px;\n  height: 56px;\n  padding: 16px;\n  border-radius: 50%;\n  &.answer {\n    color: ",";\n    background-color: ",";\n  }\n  &.notification {\n    color: ",";\n    background-color: ",";\n  }\n  &.warning {\n    color: ",";\n    background-color: ",";\n  }\n  &.info {\n    color: ",";\n    background-color: ",";\n  }\n"])),v.D.yellow70,v.D.yellow30,v.D.green70,v.D.green30,v.D.red70,v.D.red30,v.D.blue70,v.D.blue30),w=h.ZP.div(o||(o=(0,x.Z)(["\n  text-align: center;\n"]))),b=h.ZP.div(s||(s=(0,x.Z)(["\n  width: 600px;\n  position: relative;\n"]))),k=h.ZP.div(u||(u=(0,x.Z)(["\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  color: ",";\n  transition: color 0.2s;\n\n  &:hover {\n    color: ",";\n  }\n"])),v.D.gray60,v.D.darkGray150),N=h.ZP.div(c||(c=(0,x.Z)(["\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.019em;\n"]))),y=r(184),C=function(n){return n.ANSWER="answer",n.NOTIFICATION="notification",n.WARNING="warning",n.INFO="info",n}({}),I={answer:"circle-warning",notification:"circle-information",warning:"warning",info:"circle-information"},P=function(n){var e=n.loading,r=n.className,t=n.title,i=n.type,a=n.closeHandler,l=n.onConfirm,o=n.onOk,s=n.actions,u=n.children;return(0,y.jsx)(f.u_,{open:!0,onClose:a,children:(0,y.jsxs)(b,{className:r,children:[(0,y.jsx)(k,{onClick:a,children:(0,y.jsx)(p.I,{type:"close"})}),(0,y.jsxs)(Z,{children:[i&&(0,y.jsx)(j,{className:i,children:(0,y.jsx)(p.I,{type:I[i]})}),t&&(0,y.jsx)(N,{children:t}),(0,y.jsx)(w,{children:u})]}),(0,y.jsx)(m,{children:l?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(g,(0,d.Z)((0,d.Z)({},null===s||void 0===s?void 0:s.submit),{},{variant:i===C.WARNING?f.Wu.DANGER:f.Wu.FILLED,onClick:l,isLoading:e,disabled:e})),(0,y.jsx)(g,(0,d.Z)((0,d.Z)({},null===s||void 0===s?void 0:s.cancel),{},{id:"ConfirmDialogCancel",variant:f.Wu.OUTLINE,onClick:a,disabled:e}))]}):(0,y.jsx)(g,(0,d.Z)({onClick:o,isLoading:e},null===s||void 0===s?void 0:s.ok))})]})})}},4979:function(n,e,r){r.r(e),r.d(e,{default:function(){return ln}});var t,i,a,l,o,s,u,c,d,p,f,x,h,v,m,g,Z=r(4165),j=r(5861),w=r(9439),b=r(2791),k=r(168),N=r(6444),y=N.ZP.div(t||(t=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 24px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n"]))),C=N.ZP.div(i||(i=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n"]))),I=N.ZP.div(a||(a=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-auto-rows: max-content;\n  grid-gap: 14px;\n  width: 100%;\n  height: 100%;\n"]))),P=r(2986),D=r(6068),W=r(9514),E=r(5591),_=r(2450),S=N.ZP.div(l||(l=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  grid-column-gap: 10px;\n  width: 100%;\n  background-color: ",";\n  padding: 10px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color .3s;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n"])),_.D.white,_.D.lightGray40,_.D.lightGray20),R=N.ZP.div(o||(o=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n"]))),T=N.ZP.div(s||(s=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  grid-column-gap: 10px;\n"]))),B=(0,N.ZP)(P.qb)(u||(u=(0,k.Z)(["\n  margin-left: auto;\n"]))),A=r(184),L=function(n){var e=n.user,r=n.onClick;return(0,A.jsxs)(S,{onClick:r,children:[(0,A.jsx)(P.qE,{userId:e.id,src:e.avatar,firstName:e.firstName,lastName:e.lastName}),(0,A.jsxs)(R,{children:[e.lastName," ",e.firstName," (",e.email,")"]}),(0,A.jsx)(T,{children:e.roles.map((function(n){return(0,A.jsx)(P.uU,{role:n.value},n.id)}))}),(0,A.jsx)(B,{status:e.status})]})},z=N.ZP.div(c||(c=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  height: 100%;\n"]))),F=N.ZP.form(d||(d=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  grid-row-gap: 24px;\n"]))),O=N.ZP.div(p||(p=(0,k.Z)(["\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  grid-gap: 10px;\n"]))),U=N.ZP.div(f||(f=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),q=N.ZP.div(x||(x=(0,k.Z)(["\n  display: flex;\n  color: ",";\n    padding: 5px;\n    border-radius: 5px;\n    background-color: ",";\n"])),_.D.gray90,_.D.lightGray10),G=N.ZP.div(h||(h=(0,k.Z)(["\n  font-size: 24px;\n"]))),V=N.ZP.div(v||(v=(0,k.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),H=r(7518),M=r(5457),J=r(595),Q=r(5705),X=r(7834),K=function(n){var e=n.onClose,r=n.user,t=n.refetch,i=(0,b.useState)(!1),a=(0,w.Z)(i,2),l=a[0],o=a[1],s=(0,b.useState)(!1),u=(0,w.Z)(s,2),c=u[0],d=u[1],p=(0,b.useState)(!1),f=(0,w.Z)(p,2),x=f[0],h=f[1],v=(0,D.t)(),m=(0,b.useState)(!0),g=(0,w.Z)(m,2),k=g[0],N=g[1],y=(0,b.useState)([]),C=(0,w.Z)(y,2),I=C[0],_=C[1],S=(0,Q.TA)({initialValues:{roles:r.roles.map((function(n){return{value:n.id,label:n.value}}))},onSubmit:function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(e,i){var a;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=i.resetForm,n.prev=1,h(!0),n.next=5,E._.changeRoles({roles:e.roles.map((function(n){return n.value})),userId:r.id});case 5:t(),o(!1),a(),(0,W.x9)("\u0420\u043e\u043b\u0438 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u044b"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),(0,W._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(e,r){return n.apply(this,arguments)}}()}),R=r.status===H.J.ACTIVE,T=function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(){var i,a;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,d(!0),!R){n.next=9;break}return n.next=5,E._.banUser(r.id);case 5:i=n.sent,(0,W.x9)(i.data.message),n.next=13;break;case 9:return n.next=11,E._.unbanUser(r.id);case 11:a=n.sent,(0,W.x9)(a.data.message);case 13:t(),v.close(),e(),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),(0,W._N)(n.t0);case 21:return n.prev=21,d(!1),n.finish(21);case 24:case"end":return n.stop()}}),n,null,[[0,18,21,24]])})));return function(){return n.apply(this,arguments)}}(),B=function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(){var e;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,N(!0),n.next=4,X.m.fetchRoles();case 4:e=n.sent,_(e.data.map((function(n){return{value:n.id,label:n.value}}))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),(0,W.Hn)(n.t0,S);case 11:return n.prev=11,N(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(){return n.apply(this,arguments)}}(),L=function(n){S.setFieldValue("roles",n)};(0,b.useEffect)((function(){B()}),[]);var K=function(){o(!1),S.resetForm()},Y=function(){o(!0),S.setFieldValue("roles",r.roles.map((function(n){return{value:n.id,label:n.value}})))},$=(0,b.useMemo)((function(){return l?(0,A.jsxs)(F,{onSubmit:S.handleSubmit,children:[(0,A.jsx)(P.Ph,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u0438",caption:"\u0420\u043e\u043b\u0438",multi:!0,options:I,loading:k,value:S.values.roles,onChange:L}),(0,A.jsxs)(V,{children:[(0,A.jsx)(P.zx,{text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",fullWidth:!0,isLoading:x}),(0,A.jsx)(P.zx,{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",variant:P.Wu.OUTLINE,fullWidth:!0,onClick:K})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(O,{children:[(0,A.jsx)(P.qE,{userId:null===r||void 0===r?void 0:r.id,firstName:null===r||void 0===r?void 0:r.firstName,lastName:null===r||void 0===r?void 0:r.lastName,src:null===r||void 0===r?void 0:r.avatar,size:P.DZ.EXTRA,figure:"square"}),(0,A.jsxs)(G,{children:[null===r||void 0===r?void 0:r.lastName," ",null===r||void 0===r?void 0:r.firstName]}),(0,A.jsx)(P.qb,{status:null===r||void 0===r?void 0:r.status})]}),(0,A.jsx)(P.bW,{text:"ID:",info:null===r||void 0===r?void 0:r.id}),(0,A.jsx)(P.bW,{text:"\u0420\u043e\u043b\u0438:",info:(0,A.jsx)(U,{children:null===r||void 0===r?void 0:r.roles.map((function(n){return(0,A.jsx)(P.uU,{role:n.value},n.id)}))})}),(0,A.jsx)(P.bW,{text:"\u041f\u043e\u0447\u0442\u0430:",info:(0,A.jsx)(q,{children:null===r||void 0===r?void 0:r.email})}),(0,A.jsx)(P.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,J.h)(null===r||void 0===r?void 0:r.createdAt)}),(0,A.jsx)(P.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,J.h)(null===r||void 0===r?void 0:r.updatedAt)}),(0,A.jsxs)(V,{children:[(0,A.jsx)(P.zx,{text:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u043e\u043b\u0438",fullWidth:!0,onClick:Y}),(0,A.jsx)(P.zx,{fullWidth:!0,onClick:v.open,variant:R?P.Wu.DANGER:P.Wu.FILLED,text:R?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]})}),[l,R,r,x,S,k,I]);return(0,A.jsxs)(P.Bm,{titleText:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",onClose:e,closeOnDocumentClick:!1,children:[(0,A.jsx)(z,{children:$}),v.isOpen&&(0,A.jsxs)(M.V,{type:R?M.w.WARNING:M.w.ANSWER,closeHandler:v.close,onConfirm:T,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:v.close},submit:{isLoading:c,text:R?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}},children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ",R?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"," \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ",r.lastName," ",r.firstName," (",r.email,")?"]})]})},Y=r(1413),$=N.ZP.form(m||(m=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  grid-row-gap: 24px;\n"]))),nn=N.ZP.div(g||(g=(0,k.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),en=r(6975),rn=r(6727),tn=rn.Ry().shape({email:rn.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u043e\u0440\u043c\u0430\u0442\u0443 email"),firstName:rn.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),lastName:rn.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:rn.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),an=function(n){var e=n.refetch,r=n.onClose,t=(0,b.useState)(!1),i=(0,w.Z)(t,2),a=i[0],l=i[1],o=(0,b.useState)(!0),s=(0,w.Z)(o,2),u=s[0],c=s[1],d=(0,b.useState)([]),p=(0,w.Z)(d,2),f=p[0],x=p[1],h=(0,Q.TA)({initialValues:{password:"",email:"",lastName:"",roles:[],firstName:""},validationSchema:tn,onSubmit:function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(t){return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,l(!0),n.next=4,E._.fetchCreateUser((0,Y.Z)((0,Y.Z)({},t),{},{roles:t.roles.map((function(n){return n.value}))}));case 4:e(),r(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),(0,W.Hn)(n.t0,h);case 11:return n.prev=11,l(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(e){return n.apply(this,arguments)}}()}),v=function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(){var e;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=4,X.m.fetchRoles();case 4:e=n.sent,x(e.data.map((function(n){return{value:n.id,label:n.value}}))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),(0,W.Hn)(n.t0,h);case 11:return n.prev=11,c(!1),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])})));return function(){return n.apply(this,arguments)}}();return(0,b.useEffect)((function(){v()}),[]),(0,A.jsx)(P.Bm,{titleText:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onClose:r,closeOnDocumentClick:!1,children:(0,A.jsxs)($,{onSubmit:h.handleSubmit,children:[(0,A.jsx)(P.II,{autoComplete:"email",name:"email",onChange:h.handleChange,value:h.values.email,caption:"Email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",isError:Boolean(h.errors.email),errorText:h.errors.email,onBlur:h.handleBlur}),(0,A.jsx)(P.II,{name:"lastName",onChange:h.handleChange,value:h.values.lastName,caption:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",isError:Boolean(h.errors.lastName),errorText:h.errors.lastName,onBlur:h.handleBlur}),(0,A.jsx)(P.II,{name:"firstName",onChange:h.handleChange,value:h.values.firstName,caption:"\u0418\u043c\u044f",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",isError:Boolean(h.errors.firstName),errorText:h.errors.firstName,onBlur:h.handleBlur}),(0,A.jsx)(P.II,{autoComplete:"new-password",type:"password",name:"password",onChange:h.handleChange,value:h.values.password,caption:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",isError:Boolean(h.errors.password),errorText:h.errors.password,onBlur:h.handleBlur}),(0,A.jsx)(en.P,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u0438",caption:"\u0420\u043e\u043b\u0438",multi:!0,options:f,loading:u,value:h.values.roles,onChange:function(n){h.setFieldValue("roles",n)}}),(0,A.jsxs)(nn,{children:[(0,A.jsx)(P.zx,{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",fullWidth:!0,isLoading:a}),(0,A.jsx)(P.zx,{variant:P.Wu.OUTLINE,text:"\u041e\u0442\u043c\u0435\u043d\u0430",fullWidth:!0,onClick:r})]})]})})},ln=function(){var n=(0,b.useState)(!0),e=(0,w.Z)(n,2),r=e[0],t=e[1],i=(0,b.useState)(),a=(0,w.Z)(i,2),l=a[0],o=a[1],s=(0,b.useState)([]),u=(0,w.Z)(s,2),c=u[0],d=u[1],p=(0,D.t)(),f=p.isOpen,x=p.open,h=p.close,v=function(){var n=(0,j.Z)((0,Z.Z)().mark((function n(){var e;return(0,Z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t(!0),n.next=4,E._.fetchUsers();case 4:e=n.sent,d(e.data),l&&o(e.data.find((function(n){return n.id===l.id}))),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,W._N)(n.t0);case 12:return n.prev=12,t(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}();(0,b.useEffect)((function(){v()}),[]);var m=(0,b.useMemo)((function(){return r?(0,A.jsx)(P.QP,{}):c.length?(0,A.jsx)(I,{children:c.map((function(n){return(0,A.jsx)(L,{user:n,refetch:v,onClick:function(){o(n)}},n.id)}))}):(0,A.jsx)(C,{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435\u0442\u0443"})}),[c,r]);return(0,A.jsxs)(y,{children:[(0,A.jsx)(P.mr,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onButtonClick:x}),m,f&&(0,A.jsx)(an,{onClose:h,refetch:v}),l&&(0,A.jsx)(K,{user:l,onClose:function(){o(void 0)},refetch:v})]})}}}]);
//# sourceMappingURL=979.d7785307.chunk.js.map