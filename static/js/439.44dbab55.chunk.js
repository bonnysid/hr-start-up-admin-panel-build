"use strict";(self.webpackChunkhr_start_up_admin_panel=self.webpackChunkhr_start_up_admin_panel||[]).push([[439],{5439:function(e,n,r){r.r(n),r.d(n,{default:function(){return W}});var t,a,s,i,o,l,u,c,d,p,h=r(2791),f=r(168),m=r(6444),x=r(2450),g=m.ZP.div(t||(t=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 24px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n"]))),v=m.ZP.div(a||(a=(0,f.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n"]))),Z=m.ZP.div(s||(s=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-auto-rows: max-content;\n  grid-gap: 14px;\n  width: 100%;\n  height: fit-content;\n  overflow-x: auto;\n"]))),w=m.ZP.div(i||(i=(0,f.Z)(["\n  --min-width: 231px;\n  grid-gap: 16px;\n  display: grid;\n  grid-template-columns: repeat(auto-fill,minmax(var(--min-width),1fr));\n  width: 100%;\n  padding: 16px;\n  background: ",";\n  box-shadow: 0 7px 15px rgba(0,0,0,.05);\n  border-radius: 10px;\n"])),x.D.white),C=r(6031),j=r(4469),b=m.ZP.div(o||(o=(0,f.Z)(["\n  display: flex;\n  align-items: center;\n  grid-column-gap: 10px;\n  width: 100%;\n  background-color: ",";\n  padding: 10px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color .3s;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n"])),x.D.white,x.D.lightGray40,x.D.lightGray20),N=m.ZP.div(l||(l=(0,f.Z)(["\n  display: flex;\n  align-items: center;\n"]))),k=m.ZP.div(u||(u=(0,f.Z)(["\n  display: flex;\n  align-items: center;\n  grid-column-gap: 10px;\n"]))),y=(0,m.ZP)(C.qb)(c||(c=(0,f.Z)(["\n  margin-left: auto;\n"]))),S=r(184),B=function(e){var n=e.user,r=e.onClick;return(0,S.jsxs)(b,{onClick:r,children:[(0,S.jsx)(C.qE,{userId:n.id,src:n.avatar,firstName:n.firstName,lastName:n.lastName}),(0,S.jsxs)(N,{children:[n.lastName," ",n.firstName," (",n.email,")"]}),(0,S.jsx)(k,{children:n.roles.map((function(e){return(0,S.jsx)(C.uU,{role:e.value},e.id)}))}),(0,S.jsx)(y,{status:n.status})]})},I=r(5204),P=r(5639),_=r(4165),E=r(1413),U=r(5861),T=r(9439),L=m.ZP.form(d||(d=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  grid-row-gap: 24px;\n"]))),O=m.ZP.div(p||(p=(0,f.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),D=r(5705),q=r(9514),A=r(5591),M=r(1049),R=r(7834),V=r(6727),G=V.Ry().shape({email:V.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").email("\u041d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0444\u043e\u0440\u043c\u0430\u0442\u0443 email"),firstName:V.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),lastName:V.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),password:V.Z_().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")}),H=function(e){var n=e.refetch,r=e.onClose,t=(0,h.useState)(!1),a=(0,T.Z)(t,2),s=a[0],i=a[1],o=(0,h.useState)(!0),l=(0,T.Z)(o,2),u=l[0],c=l[1],d=(0,h.useState)([]),p=(0,T.Z)(d,2),f=p[0],m=p[1],x=(0,D.TA)({initialValues:{password:"",email:"",lastName:"",roles:[],firstName:""},validationSchema:G,onSubmit:function(){var e=(0,U.Z)((0,_.Z)().mark((function e(t){return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(!0),e.next=4,A._.fetchCreateUser((0,E.Z)((0,E.Z)({},t),{},{roles:t.roles.map((function(e){return e.value}))}));case 4:n(),r(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,q.Hn)(e.t0,x);case 11:return e.prev=11,i(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(n){return e.apply(this,arguments)}}()}),g=function(){var e=(0,U.Z)((0,_.Z)().mark((function e(){var n;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,R.m.fetchRoles();case 4:n=e.sent,m(n.data.map((function(e){return{value:e.id,label:e.value}}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),(0,q.Hn)(e.t0,x);case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}}();return(0,h.useEffect)((function(){g()}),[]),(0,S.jsx)(C.Bm,{titleText:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onClose:r,closeOnDocumentClick:!1,children:(0,S.jsxs)(L,{onSubmit:x.handleSubmit,children:[(0,S.jsx)(C.II,{autoComplete:"email",name:"email",onChange:x.handleChange,value:x.values.email,caption:"Email",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",isError:Boolean(x.errors.email),errorText:x.errors.email,onBlur:x.handleBlur}),(0,S.jsx)(C.II,{name:"lastName",onChange:x.handleChange,value:x.values.lastName,caption:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0444\u0430\u043c\u0438\u043b\u0438\u044e",isError:Boolean(x.errors.lastName),errorText:x.errors.lastName,onBlur:x.handleBlur}),(0,S.jsx)(C.II,{name:"firstName",onChange:x.handleChange,value:x.values.firstName,caption:"\u0418\u043c\u044f",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",isError:Boolean(x.errors.firstName),errorText:x.errors.firstName,onBlur:x.handleBlur}),(0,S.jsx)(C.II,{autoComplete:"new-password",type:"password",name:"password",onChange:x.handleChange,value:x.values.password,caption:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",isError:Boolean(x.errors.password),errorText:x.errors.password,onBlur:x.handleBlur}),(0,S.jsx)(M.P,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u0438",caption:"\u0420\u043e\u043b\u0438",multi:!0,options:f,loading:u,value:x.values.roles,onChange:function(e){x.setFieldValue("roles",e)}}),(0,S.jsxs)(O,{children:[(0,S.jsx)(C.zx,{text:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",fullWidth:!0,isLoading:s}),(0,S.jsx)(C.zx,{variant:C.Wu.OUTLINE,text:"\u041e\u0442\u043c\u0435\u043d\u0430",fullWidth:!0,onClick:r})]})]})})},z=r(2375),F=r(7518),W=function(){var e=function(){var e=(0,h.useState)(),n=(0,T.Z)(e,2),r=n[0],t=n[1],a=(0,h.useState)(""),s=(0,T.Z)(a,2),i=s[0],o=s[1],l=(0,j.Nr)(i,400),u=(0,j.dc)(),c=u.roles,d=u.getRoles,p=u.isLoading,f=(0,j.UV)(),m=f.getUsers,x=f.users,g=f.isLoading,v=(0,D.TA)({initialValues:{roles:[],status:[]},onSubmit:function(){}});(0,h.useEffect)((function(){d()}),[]),(0,h.useEffect)((function(){Z()}),[v.values.roles,l,v.values.status]),(0,h.useEffect)((function(){r&&t(x.find((function(e){return e.id===r.id})))}),[x]);var Z=function(){var e=(0,U.Z)((0,_.Z)().mark((function e(){var n,r,t;return(0,_.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.values,r=n.roles,t=n.status,e.next=3,m({search:l,roles:r.map((function(e){return e.value})),status:t.map((function(e){return e.value}))});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=(0,h.useMemo)((function(){return c.map((function(e){return{value:e.id,label:e.value}}))}),[c]),C=(0,h.useMemo)((function(){return Object.values(F.J).map((function(e){return{value:e,label:e}}))}),[]);return{activeUser:r,setActiveUser:t,form:v,users:x,statusOptions:C,rolesOptions:w,createSelectChangeHandler:function(e){return function(n){v.setFieldValue(e,n)}},handleChangeSearch:function(e){o(e.target.value)},search:i,isRolesLoading:p,isLoading:g,fetchUsers:Z,reset:function(){v.resetForm(),o("")}}}(),n=e.fetchUsers,r=e.users,t=e.isLoading,a=e.search,s=e.handleChangeSearch,i=e.form,o=e.createSelectChangeHandler,l=e.statusOptions,u=e.rolesOptions,c=e.isRolesLoading,d=e.activeUser,p=e.setActiveUser,f=e.reset,m=(0,j.te)(),x=m.isOpen,b=m.open,N=m.close,k=(0,I.E)().execIf,y=(0,h.useMemo)((function(){return t?(0,S.jsx)(C.QP,{}):r.length?(0,S.jsx)(Z,{children:r.map((function(e){return(0,S.jsx)(B,{user:e,refetch:n,onClick:function(){p(e)}},e.id)}))}):(0,S.jsx)(v,{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043d\u0435\u0442"})}),[r,t]);return(0,S.jsxs)(g,{children:[(0,S.jsx)(C.mr,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",search:a,count:"".concat(r.length," \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),onChangeSearch:s,buttonText:k(P.G.ADMIN,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),onButtonClick:k(P.G.ADMIN,b)}),(0,S.jsxs)(w,{children:[(0,S.jsx)(C.Ph,{value:i.values.roles,options:u,loading:c,onChange:o("roles"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u043e\u043b\u0438",multi:!0,searchable:!0}),(0,S.jsx)(C.Ph,{value:i.values.status,options:l,onChange:o("status"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b",multi:!0}),(0,S.jsx)(C.zx,{text:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",onClick:f})]}),y,x&&(0,S.jsx)(H,{onClose:N,refetch:n}),d&&(0,S.jsx)(z.K,{userId:d.id,onClose:function(){p(void 0)},refetch:n})]})}}}]);
//# sourceMappingURL=439.44dbab55.chunk.js.map