"use strict";(self.webpackChunkhr_start_up_admin_panel=self.webpackChunkhr_start_up_admin_panel||[]).push([[314],{5457:function(n,e,t){t.d(e,{V:function(){return N},w:function(){return k}});var s,i,r,a,o,l,c,u,d=t(1413),p=(t(2791),t(3131)),x=t(9353),f=t(168),h=t(6444),g=t(2450),v=h.ZP.div(s||(s=(0,f.Z)(["\n  display: flex;\n  justify-content: space-evenly;\n  gap: 16px;\n"]))),m=(0,h.ZP)(x.zx)(i||(i=(0,f.Z)(["\n  width: 50%;\n"]))),Z=h.ZP.div(r||(r=(0,f.Z)(["\n  padding: 56px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 16px;\n"]))),j=h.ZP.div(a||(a=(0,f.Z)(["\n  width: 56px;\n  height: 56px;\n  padding: 16px;\n  border-radius: 50%;\n  &.answer {\n    color: ",";\n    background-color: ",";\n  }\n  &.notification {\n    color: ",";\n    background-color: ",";\n  }\n  &.warning {\n    color: ",";\n    background-color: ",";\n  }\n  &.info {\n    color: ",";\n    background-color: ",";\n  }\n"])),g.D.yellow70,g.D.yellow30,g.D.green70,g.D.green30,g.D.red70,g.D.red30,g.D.blue70,g.D.blue30),b=h.ZP.div(o||(o=(0,f.Z)(["\n  text-align: center;\n  width: 100%;\n"]))),y=h.ZP.div(l||(l=(0,f.Z)(["\n  width: 600px;\n  position: relative;\n"]))),w=h.ZP.div(c||(c=(0,f.Z)(["\n  position: absolute;\n  z-index: 1;\n  top: 0;\n  right: 0;\n  cursor: pointer;\n  color: ",";\n  transition: color 0.2s;\n\n  &:hover {\n    color: ",";\n  }\n"])),g.D.gray60,g.D.darkGray150),P=h.ZP.div(u||(u=(0,f.Z)(["\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 32px;\n  letter-spacing: -0.019em;\n"]))),C=t(184),k=function(n){return n.ANSWER="answer",n.NOTIFICATION="notification",n.WARNING="warning",n.INFO="info",n}({}),D={answer:"circle-warning",notification:"circle-information",warning:"warning",info:"circle-information"},N=function(n){var e=n.loading,t=n.className,s=n.title,i=n.type,r=n.closeHandler,a=n.onConfirm,o=n.onOk,l=n.actions,c=n.children;return(0,C.jsx)(x.u_,{open:!0,closeOnDocumentClick:!1,onClose:r,children:(0,C.jsxs)(y,{className:t,children:[(0,C.jsx)(w,{onClick:r,children:(0,C.jsx)(p.I,{type:"close"})}),(0,C.jsxs)(Z,{children:[i&&(0,C.jsx)(j,{className:i,children:(0,C.jsx)(p.I,{type:D[i]})}),s&&(0,C.jsx)(P,{children:s}),(0,C.jsx)(b,{children:c})]}),(0,C.jsx)(v,{children:a?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(m,(0,d.Z)((0,d.Z)({},null===l||void 0===l?void 0:l.submit),{},{variant:i===k.WARNING?x.Wu.DANGER:x.Wu.FILLED,onClick:a,isLoading:e,disabled:e})),(0,C.jsx)(m,(0,d.Z)((0,d.Z)({},null===l||void 0===l?void 0:l.cancel),{},{id:"ConfirmDialogCancel",variant:x.Wu.OUTLINE,onClick:r,disabled:e}))]}):(0,C.jsx)(m,(0,d.Z)({onClick:o,isLoading:e},null===l||void 0===l?void 0:l.ok))})]})})}},314:function(n,e,t){t.r(e),t.d(e,{default:function(){return Nn}});var s,i,r,a,o,l,c,u,d,p,x,f,h,g,v,m,Z,j,b,y,w,P,C,k,D,N,I=t(9439),S=t(2791),E=t(168),W=t(6444),A=t(2450),L=W.ZP.div(s||(s=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 24px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n"]))),O=W.ZP.div(i||(i=(0,E.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-auto-rows: max-content;\n  grid-gap: 14px;\n  width: 100%;\n  height: fit-content;\n  overflow-x: auto;\n"]))),z=W.ZP.div(r||(r=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n"]))),G=W.ZP.div(a||(a=(0,E.Z)(["\n  --min-width: 231px;\n  grid-gap: 16px;\n  display: grid;\n  grid-template-columns: 231px 231px 231px 340px;\n  width: 100%;\n  padding: 16px;\n  background: ",";\n  box-shadow: 0 7px 15px rgba(0,0,0,.05);\n  border-radius: 10px;\n"])),A.D.white),_=t(9353),R=W.ZP.div(o||(o=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  width: 100%;\n  padding: 10px;\n  border-radius: 5px;\n  border: 1px solid ",";\n  background: ",";\n  cursor: pointer;\n  transition: background-color .3s;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n"])),A.D.lightGray40,A.D.white,A.D.lightGray40,A.D.lightGray20),F=W.ZP.div(l||(l=(0,E.Z)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n"]))),T=W.ZP.div(c||(c=(0,E.Z)(["\n  display: flex;\n  width: fit-content;\n  gap: 10px;\n  align-items: center;\n"]))),V=W.ZP.div(u||(u=(0,E.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),A.D.gray70),J=W.ZP.div(d||(d=(0,E.Z)(["\n  font-size: 15px;\n  font-weight: 500;\n"]))),q=W.ZP.div(p||(p=(0,E.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),A.D.gray90),H=W.ZP.div(x||(x=(0,E.Z)(["\n  display: flex;\n  padding: 4px 6px;\n  border-radius: 6px;\n"]))),M=t(6886),U=t(184),Q=function(n){var e=n.tag;return(0,U.jsx)(H,{style:M.i[(0,_.be)(e.id.slice(-1),M.i.length)],children:e.value})},B=t(3131),Y=function(n){var e=n.post,t=n.onClick;return(0,U.jsxs)(R,{onClick:t,children:[(0,U.jsxs)(F,{children:[(0,U.jsxs)(J,{children:[e.title," (",e.id,")"]}),(0,U.jsxs)(T,{children:[(0,U.jsxs)(V,{children:[(0,U.jsx)(B.I,{type:"eye",size:B.J.LG}),e.views]}),(0,U.jsxs)(V,{children:[(0,U.jsx)(B.I,{type:"star-filled",size:B.J.LG}),e.favoriteCount]}),(0,U.jsxs)(V,{children:[(0,U.jsx)(B.I,{type:"message",size:B.J.LG}),e.commentsCount]}),(0,U.jsx)(_.qb,{status:e.status})]})]}),(0,U.jsx)(T,{children:e.tags.map((function(n){return(0,U.jsx)(Q,{tag:n},n.id)}))}),(0,U.jsxs)(T,{children:[(0,U.jsx)(_.qE,{firstName:e.user.firstName,lastName:e.user.lastName,src:e.user.avatar,userId:e.user.id}),e.user.lastName," ",e.user.firstName," (",e.user.email,")"]}),(0,U.jsx)(q,{children:e.shortDescription})]})},K=t(4165),X=t(5861),$=t(6710),nn=W.ZP.div(f||(f=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  height: 100%;\n"]))),en=W.ZP.div(h||(h=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),tn=W.ZP.div(g||(g=(0,E.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),sn=(W.ZP.div(v||(v=(0,E.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),W.ZP.div(m||(m=(0,E.Z)(["\n  font-size: 24px;\n"]))),W.ZP.div(Z||(Z=(0,E.Z)(["\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: center;\n"])))),rn=W.ZP.div(j||(j=(0,E.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),an=((0,W.ZP)($.Z)(b||(b=(0,E.Z)(["\n  width: 100% !important;\n"]))),W.ZP.div(y||(y=(0,E.Z)(["\n  font-size: 17px;\n  padding-bottom: 5px;\n  border-bottom: 1px solid ",";\n"])),A.D.lightGray40)),on=W.ZP.div(w||(w=(0,E.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),ln=W.ZP.div(P||(P=(0,E.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),A.D.gray70),cn=W.ZP.div(C||(C=(0,E.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),A.D.gray90),un=t(7518),dn=t(6200),pn=t(5457),xn=t(9514),fn=t(5671),hn=t(3144),gn=t(46),vn=function(){function n(){(0,fn.Z)(this,n)}return(0,hn.Z)(n,null,[{key:"fetchPosts",value:function(n){return gn.e.get("/admin/posts",{params:n})}},{key:"fetchPostDetail",value:function(n){return gn.e.get("/admin/posts/".concat(n))}},{key:"banPost",value:function(n){return gn.e.post("/admin/posts/ban/".concat(n))}},{key:"unbanPost",value:function(n){return gn.e.post("/admin/posts/unban/".concat(n))}}]),n}(),mn=t(595),Zn=function(n){var e=n.onClose,t=n.refetch,s=n.postId,i=(0,S.useState)(),r=(0,I.Z)(i,2),a=r[0],o=r[1],l=(0,S.useState)(!1),c=(0,I.Z)(l,2),u=c[0],d=c[1],p=(0,dn.te)(),x=(null===a||void 0===a?void 0:a.status)===un.J.ACTIVE,f=function(){var n=(0,X.Z)((0,K.Z)().mark((function n(){var e;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,vn.fetchPostDetail(s);case 3:e=n.sent,o(e.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),(0,xn._N)(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),h=function(){var n=(0,X.Z)((0,K.Z)().mark((function n(){var s,i;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!a){n.next=17;break}if(d(!0),!x){n.next=10;break}return n.next=6,vn.banPost(a.id);case 6:s=n.sent,(0,xn.x9)(s.data.message),n.next=14;break;case 10:return n.next=12,vn.unbanPost(a.id);case 12:i=n.sent,(0,xn.x9)(i.data.message);case 14:t(),p.close(),e();case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),(0,xn._N)(n.t0);case 22:return n.prev=22,d(!1),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[0,19,22,25]])})));return function(){return n.apply(this,arguments)}}();return(0,S.useEffect)((function(){f()}),[s]),(0,U.jsxs)(_.Bm,{titleText:a&&(0,U.jsxs)(en,{children:[(0,U.jsx)(tn,{children:(0,U.jsxs)(_.g2,{tooltip:!0,children:[a.title," (",a.id,")"]})}),(0,U.jsx)(_.qb,{status:a.status}),(0,U.jsxs)(ln,{children:[(0,U.jsx)(B.I,{type:"eye",size:B.J.LG}),a.views]}),(0,U.jsxs)(ln,{children:[(0,U.jsx)(B.I,{type:"star-filled",size:B.J.LG}),a.favoriteCount]}),(0,U.jsxs)(ln,{children:[(0,U.jsx)(B.I,{type:"message",size:B.J.LG}),a.commentsCount]})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,U.jsx)(nn,{children:a?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.bW,{text:"ID:",info:(0,U.jsx)(U.Fragment,{children:a.id})}),(0,U.jsx)(_.bW,{text:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",info:(0,U.jsx)(U.Fragment,{children:a.title})}),(0,U.jsx)(_.bW,{text:"\u0410\u0432\u0442\u043e\u0440:",info:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(_.qE,{firstName:a.user.firstName,lastName:a.user.lastName,src:a.user.avatar}),a.user.lastName," ",a.user.firstName," (",a.user.email,")"]})}),(0,U.jsx)(_.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,mn.h)(null===a||void 0===a?void 0:a.createdAt)}),(0,U.jsx)(_.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,mn.h)(null===a||void 0===a?void 0:a.updatedAt)}),(0,U.jsx)(_.bW,{text:"\u0422\u0435\u0433\u0438:",info:(0,U.jsx)(sn,{children:a.tags.map((function(n){return(0,U.jsx)(Q,{tag:n},n.id)}))})}),(0,U.jsx)(_.bW,{text:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,U.jsx)(cn,{children:a.shortDescription})}),(0,U.jsx)(_.bW,{text:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,U.jsx)(cn,{children:a.description})}),(0,U.jsx)(_.Y7,{url:a.videoUrl}),(0,U.jsxs)(on,{children:[(0,U.jsx)(an,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),a.comments.map((function(n){return(0,U.jsx)(_.sv,{comment:n},n.id)}))]}),(0,U.jsx)(rn,{children:(0,U.jsx)(_.zx,{fullWidth:!0,onClick:p.open,variant:x?_.Wu.DANGER:_.Wu.FILLED,text:x?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})]}):(0,U.jsx)(_.QP,{})}),p.isOpen&&(0,U.jsxs)(pn.V,{type:x?pn.w.WARNING:pn.w.ANSWER,closeHandler:p.close,onConfirm:h,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:p.close},submit:{isLoading:u,text:x?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}},children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ",x?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c",' \u043f\u043e\u0441\u0442 "',null===a||void 0===a?void 0:a.title,'"?']})]})},jn=t(3433),bn=t(4942),yn=t(5705),wn=function(n){return n.CREATED_AT="createdAt",n.VIEWS="views",n}({}),Pn=function(n){return n.DESC="desc",n.ASC="asc",n}({}),Cn=(N={},(0,bn.Z)(N,wn.CREATED_AT,(k={},(0,bn.Z)(k,Pn.ASC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435"),(0,bn.Z)(k,Pn.DESC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),k)),(0,bn.Z)(N,wn.VIEWS,(D={},(0,bn.Z)(D,Pn.DESC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0430\u043c\u044b\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0435"),(0,bn.Z)(D,Pn.ASC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043c\u0435\u043d\u0435\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c\u044b\u0435"),D)),N),kn=Object.values(wn).reduce((function(n,e){return[].concat((0,jn.Z)(n),(0,jn.Z)(Object.values(Pn).map((function(n){return{value:"".concat(e,"_").concat(n),label:Cn[e][n],meta:{key:e,value:n}}}))))}),[]),Dn=function(){var n=(0,S.useState)(!0),e=(0,I.Z)(n,2),t=e[0],s=e[1],i=(0,S.useState)([]),r=(0,I.Z)(i,2),a=r[0],o=r[1],l=(0,S.useState)(""),c=(0,I.Z)(l,2),u=c[0],d=c[1],p=(0,dn.Nr)(u,400),x=(0,yn.TA)({initialValues:{tags:[],users:[],status:[],sort:kn[0]},onSubmit:function(){}}),f=(0,dn.UV)(),h=(0,dn.e0)();(0,S.useEffect)((function(){f.getUsers(),h.getTags()}),[]),(0,S.useEffect)((function(){g()}),[x.values.users,x.values.tags,p,x.values.status,x.values.sort]);var g=function(){var n=(0,X.Z)((0,K.Z)().mark((function n(){var e,t,i,r,a,l,c,u;return(0,K.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s(!0),i=x.values,r=i.users,a=i.tags,l=i.status,c=i.sort,n.next=5,vn.fetchPosts({search:p,tags:a.map((function(n){return n.value})),users:r.map((function(n){return n.value})),status:l.map((function(n){return n.value})),sort:null===(e=c.meta)||void 0===e?void 0:e.key,sortValue:null===(t=c.meta)||void 0===t?void 0:t.value});case 5:u=n.sent,o(u.data),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,xn._N)(n.t0);case 12:return n.prev=12,s(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),v=(0,S.useMemo)((function(){return f.users.map((function(n){return{value:n.id,label:n.email,customize:{avatarSrc:n.avatar,avatarFirstName:n.firstName,avatarLastName:n.lastName}}}))}),[f.users]),m=(0,S.useMemo)((function(){return h.tags.map((function(n){return{value:n.id,label:n.value}}))}),[h.tags]),Z=(0,S.useMemo)((function(){return Object.values(un.J).map((function(n){return{value:n,label:n}}))}),[]);return{form:x,usersOptions:v,tagsOptions:m,usersRes:f,sortOptions:kn,tagsRes:h,posts:a,statusOptions:Z,createSelectChangeHandler:function(n){return function(e){x.setFieldValue(n,e)}},handleChangeSearch:function(n){d(n.target.value)},search:u,isLoading:t,getPosts:g}},Nn=function(){var n=(0,S.useState)(),e=(0,I.Z)(n,2),t=e[0],s=e[1],i=Dn(),r=i.form,a=i.tagsRes,o=i.tagsOptions,l=i.usersOptions,c=i.usersRes,u=i.createSelectChangeHandler,d=i.posts,p=i.isLoading,x=i.search,f=i.handleChangeSearch,h=i.getPosts,g=i.statusOptions,v=i.sortOptions,m=(0,S.useMemo)((function(){return p?(0,U.jsx)(_.QP,{}):d.length?(0,U.jsx)(O,{children:d.map((function(n){return(0,U.jsx)(Y,{post:n,onClick:function(){return s(n)}},n.id)}))}):(0,U.jsx)(z,{children:"\u041f\u043e\u0441\u0442\u043e\u0432 \u043d\u0435\u0442"})}),[d,p]);return(0,U.jsxs)(L,{children:[(0,U.jsx)(_.mr,{title:"\u041f\u043e\u0441\u0442\u044b",search:x,onChangeSearch:f}),(0,U.jsxs)(G,{children:[(0,U.jsx)(_.Ph,{value:r.values.tags,options:o,loading:a.isLoading,onChange:u("tags"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0435\u0433\u0438",multi:!0,searchable:!0}),(0,U.jsx)(_.Ph,{value:r.values.users,options:l,loading:c.isLoading,onChange:u("users"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439",multi:!0,searchable:!0}),(0,U.jsx)(_.Ph,{value:r.values.status,options:g,onChange:u("status"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b",multi:!0}),(0,U.jsx)(_.Ph,{value:r.values.sort,options:v,onChange:u("sort"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"})]}),m,t&&(0,U.jsx)(Zn,{postId:t.id,onClose:function(){return s(void 0)},refetch:h})]})}}}]);
//# sourceMappingURL=314.1e49bb19.chunk.js.map