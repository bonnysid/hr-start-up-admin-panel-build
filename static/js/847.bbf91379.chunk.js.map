{"version":3,"file":"static/js/847.bbf91379.chunk.js","mappings":"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","sources":["components/Dialog/styled.ts","components/Dialog/index.tsx","pages/Dialogs/Message/styled.ts","pages/Dialogs/Message/index.tsx","pages/Dialogs/styled.ts","pages/Dialogs/DialogItem/styled.ts","pages/Dialogs/DialogItem/index.tsx","pages/Dialogs/ActiveDialog/styled.ts","pages/Dialogs/ActiveDialog/index.tsx","pages/Dialogs/index.tsx"],"sourcesContent":["import styled from 'styled-components';\r\nimport { Button } from '@src/components';\r\nimport { COLORS } from '@src/utils/colors';\r\n\r\nexport const Buttons = styled.div`\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  gap: 16px;\r\n`;\r\n\r\nexport const StyledButton = styled(Button)`\r\n  width: 50%;\r\n`;\r\n\r\nexport const Body = styled.div`\r\n  padding: 56px 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 16px;\r\n`;\r\n\r\nexport const StyledIcon = styled.div`\r\n  width: 56px;\r\n  height: 56px;\r\n  padding: 16px;\r\n  border-radius: 50%;\r\n  &.answer {\r\n    color: ${COLORS.yellow70};\r\n    background-color: ${COLORS.yellow30};\r\n  }\r\n  &.notification {\r\n    color: ${COLORS.green70};\r\n    background-color: ${COLORS.green30};\r\n  }\r\n  &.warning {\r\n    color: ${COLORS.red70};\r\n    background-color: ${COLORS.red30};\r\n  }\r\n  &.info {\r\n    color: ${COLORS.blue70};\r\n    background-color: ${COLORS.blue30};\r\n  }\r\n`;\r\n\r\nexport const Content = styled.div`\r\n  text-align: center;\r\n  width: 100%;\r\n`;\r\n\r\nexport const Container = styled.div`\r\n  width: 600px;\r\n  position: relative;\r\n`;\r\n\r\nexport const Close = styled.div`\r\n  position: absolute;\r\n  z-index: 1;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  color: ${COLORS.gray60};\r\n  transition: color 0.2s;\r\n\r\n  &:hover {\r\n    color: ${COLORS.darkGray150};\r\n  }\r\n`;\r\n\r\nexport const Title = styled.div`\r\n  font-weight: 600;\r\n  font-size: 24px;\r\n  line-height: 32px;\r\n  letter-spacing: -0.019em;\r\n`;\r\n","import React, { PropsWithChildren } from 'react';\r\nimport { Icon, IconTypes } from '@components/Icon';\r\nimport { ButtonProps, ButtonVariant, Modal } from '@src/components';\r\n\r\nimport * as ST from './styled';\r\n\r\nexport enum DialogTypes {\r\n  ANSWER = 'answer',\r\n  NOTIFICATION = 'notification',\r\n  WARNING = 'warning',\r\n  INFO = 'info'\r\n}\r\n\r\ntype ActionType = React.ButtonHTMLAttributes<HTMLButtonElement> & ButtonProps;\r\n\r\ninterface IActionsTypes {\r\n  ok?: ActionType;\r\n  cancel?: ActionType;\r\n  submit?: ActionType;\r\n}\r\n\r\ninterface IDialogProps {\r\n  loading?: boolean;\r\n  classNamePrefix?: string;\r\n  className?: string;\r\n  title?: string;\r\n  type?: DialogTypes;\r\n  onConfirm?: () => void;\r\n  onCancel?: () => void;\r\n  onClose?: () => void;\r\n  onOk?: () => void;\r\n  actions?: IActionsTypes;\r\n  closeOnDocumentClick?: boolean;\r\n  closeOnEscape?: boolean;\r\n}\r\n\r\nconst dialogIcons: Record<DialogTypes, IconTypes> = {\r\n  answer: 'circle-warning',\r\n  notification: 'circle-information',\r\n  warning: 'warning',\r\n  info: 'circle-information',\r\n};\r\n\r\ninterface IProps extends IDialogProps, PropsWithChildren {\r\n  closeHandler: () => void;\r\n}\r\n\r\nconst Dialog: React.FC<IProps> = ({\r\n  loading,\r\n  className,\r\n  title,\r\n  type,\r\n  closeHandler,\r\n  onConfirm,\r\n  onOk,\r\n  actions,\r\n  children,\r\n}) => (\r\n  <Modal\r\n    open\r\n    closeOnDocumentClick={false}\r\n    onClose={closeHandler}\r\n  >\r\n    <ST.Container className={className}>\r\n      <ST.Close\r\n        onClick={closeHandler}\r\n      >\r\n        <Icon\r\n          type=\"close\"\r\n        />\r\n      </ST.Close>\r\n      <ST.Body>\r\n        {type && (\r\n          <ST.StyledIcon className={type}>\r\n            <Icon type={dialogIcons[type]} />\r\n          </ST.StyledIcon>\r\n        )}\r\n        {title && <ST.Title>{title}</ST.Title>}\r\n        <ST.Content>{children}</ST.Content>\r\n      </ST.Body>\r\n      <ST.Buttons>\r\n        {onConfirm ? (\r\n          <>\r\n            <ST.StyledButton\r\n              {...actions?.submit}\r\n              variant={type === DialogTypes.WARNING ? ButtonVariant.DANGER : ButtonVariant.FILLED}\r\n              onClick={onConfirm}\r\n              isLoading={loading}\r\n              disabled={loading}\r\n            />\r\n            <ST.StyledButton\r\n              {...actions?.cancel}\r\n              id=\"ConfirmDialogCancel\"\r\n              variant={ButtonVariant.OUTLINE}\r\n              onClick={closeHandler}\r\n              disabled={loading}\r\n            />\r\n          </>\r\n        ) : (\r\n          <ST.StyledButton\r\n            onClick={onOk}\r\n            isLoading={loading}\r\n            {...actions?.ok}\r\n          />\r\n        )}\r\n      </ST.Buttons>\r\n    </ST.Container>\r\n  </Modal>\r\n);\r\n\r\nexport { Dialog };\r\n","import styled from 'styled-components';\r\nimport { COLORS } from '@src/utils/colors';\r\nimport { Dropdown } from '@components/Select/Dropdown';\r\n\r\nexport const Wrapper = styled.div<{ isOwn: boolean }>`\r\n  display: flex;\r\n  position: relative;\r\n  width: 100%;\r\n  justify-content: ${({ isOwn }) => isOwn ? 'flex-end' : 'flex-start'};\r\n`;\r\n\r\nexport const Content = styled.div<{ isOwn: boolean }>`\r\n  display: flex;\r\n  align-items: flex-end;\r\n  position: relative;\r\n  gap: 10px;\r\n  width: fit-content;\r\n  height: fit-content;\r\n  padding: 8px 8px 4px 8px;\r\n  max-width: calc(50% - 10px);\r\n  border-radius: 5px;\r\n  background-color: ${({ isOwn }) => isOwn ? COLORS.blue30 : COLORS.lightGray30};\r\n`;\r\n\r\nexport const StyledDropDown = styled(Dropdown)`\r\n  width: 200px;\r\n  top: -43px !important;\r\n  left: -150px;\r\n  \r\n  & > div {\r\n    background: ${COLORS.blue20};\r\n  }\r\n`;\r\n\r\nexport const Text = styled.div`\r\n  padding-bottom: 5px;\r\n`;\r\n\r\nexport const Date = styled.div`\r\n  color: ${COLORS.gray90}\r\n`;\r\n","import React, { FC, useMemo, useRef, useState } from 'react';\r\nimport { IMessage } from '@src/api/Dialogs/models';\r\nimport * as ST from './styled';\r\nimport { getTimeMessage } from '@src/utils/date';\r\nimport { useAuth } from '@providers/AuthProvider';\r\nimport { Dropdown } from '@components/Select/Dropdown';\r\nimport { Button, ButtonVariant } from '@src/components';\r\nimport { Dialog, DialogTypes } from '@components/Dialog';\r\nimport { useModalControls } from '@src/hooks';\r\nimport { SocketApi } from '@src/api/SocketApi/SocketApi';\r\nimport { IComplaintMessage } from '@src/api/Complaints/models';\r\n\r\ninterface IProps {\r\n  message: IMessage | IComplaintMessage;\r\n}\r\n\r\nexport const Message: FC<IProps> = ({ message }) => {\r\n  const { user } = useAuth();\r\n  const refContainer = useRef<HTMLDivElement | null>(null);\r\n  const deleteModal = useModalControls();\r\n  const dropdown = useModalControls();\r\n\r\n  const isOwn = useMemo(() => message.user.id === user?.id, [message, user]);\r\n\r\n  const handleClick = (e: React.MouseEvent<HTMLDivElement>) => {\r\n    if ('dialogId' in message) {\r\n      e.preventDefault();\r\n      if (isOwn) {\r\n        dropdown.open();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    if ('dialogId' in message) {\r\n      SocketApi.deleteMessage({ messageId: message.id });\r\n      deleteModal.close()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ST.Wrapper isOwn={isOwn}>\r\n      <ST.Content ref={refContainer} isOwn={isOwn} onContextMenu={handleClick}>\r\n        <ST.Text>{message.text}</ST.Text>\r\n        <ST.Date>{getTimeMessage(message.updatedAt)}</ST.Date>\r\n        {dropdown.isOpen && (\r\n          <ST.StyledDropDown\r\n            selectionContainer={refContainer.current as HTMLDivElement}\r\n            onClose={dropdown.close}\r\n          >\r\n            <Button variant={ButtonVariant.DANGER} text=\"Удалить\" fullWidth onClick={deleteModal.open} />\r\n          </ST.StyledDropDown>\r\n        )}\r\n      </ST.Content>\r\n      {deleteModal.isOpen && (\r\n        <Dialog\r\n          type={DialogTypes.WARNING}\r\n          closeHandler={deleteModal.close}\r\n          onConfirm={handleDelete}\r\n          actions={{\r\n            cancel: {\r\n              text: 'Отменить',\r\n              onClick: deleteModal.close,\r\n            },\r\n            submit: {\r\n              text: 'Удалить',\r\n            }\r\n          }}\r\n        >\r\n          Вы действительно хотите удалить сообщение?\r\n        </Dialog>\r\n      )}\r\n    </ST.Wrapper>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { COLORS } from '@src/utils/colors';\r\n\r\nexport const Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  grid-row-gap: 24px;\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 24px;\r\n`;\r\n\r\nexport const Content = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n  border: 1px solid ${COLORS.lightGray40};\r\n  background: ${COLORS.white};\r\n  border-radius: 5px;\r\n`;\r\n\r\nexport const ScrollableContent = styled.div<{ hasActive?: boolean }>`\r\n  max-width: ${({ hasActive }) => hasActive ? '400px' : '100%'};\r\n  height: 100%;\r\n  width: 100%;\r\n  overflow-y: auto;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 0;\r\n  }\r\n`;\r\n\r\nexport const DialogsContainer = styled.div<{ hasActive?: boolean }>`\r\n  display: flex;\r\n  flex-direction: column;\r\n  max-width: ${({ hasActive }) => hasActive ? '400px' : '100%'};\r\n  width: 100%;\r\n  min-height: 100%;\r\n  height: fit-content;\r\n  border-right: ${({ hasActive }) => hasActive ? `1px solid ${COLORS.lightGray40}` : 'none'};\r\n  background: ${COLORS.white};\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const EmptyText = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n","import styled from 'styled-components';\r\nimport { COLORS } from '@src/utils/colors';\r\nimport { TextShorter } from '@src/components';\r\n\r\nexport const Wrapper = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n  gap: 12px;\r\n  cursor: pointer;\r\n  height: fit-content;\r\n  transition: background-color .3s;\r\n  padding: 10px;\r\n  overflow: hidden;\r\n  \r\n  &:hover {\r\n    background-color: ${COLORS.blue20};\r\n  }\r\n`;\r\n\r\nexport const Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  gap: 5px;\r\n  width: 100%;\r\n`;\r\n\r\nexport const Content = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  overflow: hidden;\r\n  gap: 5px;\r\n`;\r\n\r\nexport const Text = styled(TextShorter)`\r\n  white-space: nowrap;\r\n  color: ${COLORS.gray90};\r\n  min-width: 0;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nexport const NewMessages = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 20px;\r\n  min-width: 20px;\r\n  height: 20px;\r\n  min-height: 20px;\r\n  background-color: ${COLORS.blue60};\r\n  color: ${COLORS.white};\r\n  border-radius: 10px;\r\n`;\r\n\r\nexport const Title = styled(TextShorter)`\r\n  font-weight: 500;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n`;\r\n\r\nexport const Date = styled.div`\r\n  color: ${COLORS.gray90};\r\n  white-space: nowrap;\r\n`;\r\n","import { FC } from 'react';\r\nimport { IDialogListItem } from '@src/api/Dialogs/models';\r\nimport * as ST from './styled';\r\nimport { Avatar, AvatarSize, TextShorter } from '@src/components';\r\nimport { getTimeMessage } from '@src/utils/date';\r\n\r\ninterface IProps {\r\n  dialog: IDialogListItem;\r\n  onClick: () => void;\r\n}\r\n\r\nexport const DialogItem: FC<IProps> = ({ dialog, onClick }) => {\r\n  return (\r\n    <ST.Wrapper onClick={onClick}>\r\n      <Avatar\r\n        userId={dialog.user.id}\r\n        firstName={dialog.user.firstName}\r\n        lastName={dialog.user.lastName}\r\n        src={dialog.user.avatar}\r\n        size={AvatarSize.XXXL}\r\n      />\r\n      <ST.Content>\r\n        <ST.Header>\r\n          <ST.Title tooltip>\r\n            {dialog.user.lastName} {dialog.user.firstName} ({dialog.user.email})\r\n          </ST.Title>\r\n\r\n          <ST.Date>\r\n            {getTimeMessage(dialog.lastMessage.updatedAt)}\r\n          </ST.Date>\r\n        </ST.Header>\r\n        <ST.Header>\r\n          <ST.Text>\r\n            {dialog.lastMessage.text}\r\n          </ST.Text>\r\n          {Boolean(dialog.unreadableMessages) && (\r\n            <ST.NewMessages>\r\n              {dialog.unreadableMessages}\r\n            </ST.NewMessages>\r\n          )}\r\n        </ST.Header>\r\n      </ST.Content>\r\n    </ST.Wrapper>\r\n  );\r\n}\r\n","import styled from 'styled-components';\r\nimport { COLORS } from '@src/utils/colors';\r\nimport { Icon } from '@components/Icon';\r\n\r\nexport const Wrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  height: 100%;\r\n`;\r\n\r\nexport const Content = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n  width: 100%;\r\n  height: fit-content;\r\n  min-height: 100%;\r\n  padding: 10px;\r\n`;\r\n\r\nexport const NewMessage = styled.div`\r\n  position: absolute;\r\n  cursor: pointer;\r\n  bottom: 20px;\r\n  left: calc(50% - 69px);\r\n  display: flex;\r\n  padding: 4px 8px;\r\n  border-radius: 5px;\r\n  color: ${COLORS.lightGray10};\r\n  background-color: ${COLORS.blue60};\r\n  \r\n  &:hover {\r\n    background-color: ${COLORS.blue70};\r\n  }\r\n\r\n  &:active,\r\n  &.active {\r\n    background-color: ${COLORS.blue80};\r\n  }\r\n`;\r\n\r\nexport const NewMessageWrapper = styled.div`\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow: hidden;\r\n`;\r\n\r\nexport const ScrollableContent = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  position: relative;\r\n\r\n  &::-webkit-scrollbar {\r\n    width: 0;\r\n  }\r\n`;\r\n\r\nexport const Footer = styled.form`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n  padding: 10px;\r\n  border-top: 1px solid ${COLORS.lightGray40};\r\n`;\r\n\r\nexport const StyledButton = styled.button`\r\n  background: transparent;\r\n`;\r\n\r\nexport const SendIcon = styled(Icon)`\r\n  cursor: pointer;\r\n  color: ${COLORS.gray60};\r\n  transition: color .3s;\r\n  \r\n  &:hover {\r\n    color: ${COLORS.blue60};\r\n  }\r\n`;\r\n\r\nexport const Title = styled.div`\r\n  font-weight: 500;\r\n`;\r\n\r\nexport const Header = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n  padding: 10px;\r\n  border-bottom: 1px solid ${COLORS.lightGray40};\r\n  box-shadow: 0 7px 15px rgba(0,0,0,.05);\r\n`;\r\n","import { FC, useEffect, useLayoutEffect, useMemo, useRef, useState } from 'react';\r\nimport { IUser } from '@src/api/Users/models';\r\nimport * as ST from './styled';\r\nimport { AppLoader, Avatar, AvatarSize, Button, Textarea } from '@src/components';\r\nimport { Icon, IconSize } from '@components/Icon';\r\nimport { IDeleteMessage, IMessage, ISocketMessage } from '@src/api/Dialogs/models';\r\nimport { toastError } from '@src/utils/toast';\r\nimport { DialogsApi } from '@src/api/Dialogs/DialogsApi';\r\nimport { Message } from '@pages/Dialogs/Message';\r\nimport { SocketApi } from '@src/api/SocketApi/SocketApi';\r\nimport { MessageEvents } from '@src/api/SocketApi/models';\r\nimport { useMessageCallBack } from '@src/hooks';\r\nimport { useAuth } from '@providers/AuthProvider';\r\nimport { useFormik } from 'formik';\r\n\r\ninterface IProps {\r\n  dialogId: string;\r\n  user: IUser;\r\n  onBack?: () => void;\r\n}\r\n\r\nexport const ActiveDialog: FC<IProps> = ({ dialogId, user, onBack }) => {\r\n  const { user: currentUser } = useAuth();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [messages, setMessages] = useState<IMessage[]>([]);\r\n  const scrollRef = useRef<HTMLDivElement | null>(null);\r\n  const [showNewMessage, setShowNewMessage] = useState(false);\r\n  const form = useFormik({\r\n    initialValues: {\r\n      message: ''\r\n    },\r\n    onSubmit: (values) => {\r\n      onSend(values.message)\r\n    }\r\n  });\r\n\r\n  const onSend = (message: string) => {\r\n    SocketApi.sendMessage({\r\n      dialogId,\r\n      text: message,\r\n    });\r\n    form.resetForm();\r\n  }\r\n\r\n  const getDialog = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const res = await DialogsApi.fetchDialogInfo(dialogId);\r\n\r\n      setMessages(res.data.messages);\r\n    } catch (e) {\r\n      toastError(e);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  useMessageCallBack((message: string) => {\r\n    const parsedMessage = JSON.parse(message) as ISocketMessage;\r\n\r\n    if (parsedMessage.event === MessageEvents.MESSAGE && parsedMessage.dialogId === dialogId) {\r\n      setMessages(prev => [...prev, parsedMessage]);\r\n\r\n      if (parsedMessage.user.id !== currentUser?.id) {\r\n        SocketApi.readMessage({ messageId: parsedMessage.id });\r\n        if (scrollRef.current) {\r\n          const scroll = scrollRef.current?.scrollHeight - scrollRef.current?.clientHeight - scrollRef.current?.scrollTop\r\n          if (scroll >= 50) {\r\n            setShowNewMessage(true)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (parsedMessage.event === MessageEvents.DELETE_MESSAGE) {\r\n      const parsedMessage = JSON.parse(message) as IDeleteMessage;\r\n\r\n      if (parsedMessage.dialogId === dialogId) {\r\n        setMessages(prev => prev.filter(it => it.id !== parsedMessage.messageId));\r\n      }\r\n    }\r\n  }, [dialogId, currentUser]);\r\n\r\n  const scrollToBottom = () => {\r\n    scrollRef.current?.scrollTo(0, scrollRef.current?.scrollHeight)\r\n  }\r\n\r\n  const handleScroll = () => {\r\n    if (scrollRef.current) {\r\n      const scroll = scrollRef.current?.scrollHeight - scrollRef.current?.clientHeight - scrollRef.current?.scrollTop\r\n\r\n      if (scroll < 25) {\r\n        setShowNewMessage(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  useLayoutEffect(() => {\r\n    if (scrollRef.current) {\r\n      const lastMsg = messages[messages.length - 1];\r\n      const scroll = scrollRef.current?.scrollHeight - scrollRef.current?.clientHeight - scrollRef.current?.scrollTop;\r\n\r\n      if (lastMsg && lastMsg.user.id === currentUser?.id) {\r\n        scrollToBottom()\r\n      } else if (scroll < 50) {\r\n        scrollToBottom()\r\n      }\r\n    }\r\n\r\n  }, [messages]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (!isLoading) {\r\n      scrollToBottom()\r\n    }\r\n  }, [isLoading]);\r\n\r\n  useEffect(() => {\r\n    getDialog();\r\n  }, [dialogId]);\r\n\r\n  const renderedContent = useMemo(() => {\r\n    if (isLoading) {\r\n      return <AppLoader/>\r\n    }\r\n\r\n    if (!messages.length) {\r\n      return 'Нет сообщений'\r\n    }\r\n\r\n    return messages.map((it) => <Message key={it.id} message={it} />)\r\n  }, [messages, isLoading]);\r\n\r\n  return (\r\n    <ST.Wrapper>\r\n      <ST.Header>\r\n        {onBack && (\r\n          <Button onClick={onBack}>\r\n            <Icon type=\"arrow-left\" />\r\n          </Button>\r\n        )}\r\n        <Avatar\r\n          userId={user.id}\r\n          firstName={user.firstName}\r\n          size={AvatarSize.XXXL}\r\n          lastName={user.lastName}\r\n          src={user.avatar}\r\n        />\r\n        <ST.Title>{user.lastName} {user.firstName} ({user.email})</ST.Title>\r\n      </ST.Header>\r\n      <ST.NewMessageWrapper>\r\n        <ST.ScrollableContent\r\n          ref={scrollRef}\r\n          onScroll={handleScroll}\r\n        >\r\n          <ST.Content>\r\n            {renderedContent}\r\n          </ST.Content>\r\n        </ST.ScrollableContent>\r\n        {showNewMessage && (\r\n          <ST.NewMessage onClick={scrollToBottom}>\r\n            Новое сообщение\r\n          </ST.NewMessage>\r\n        )}\r\n      </ST.NewMessageWrapper>\r\n\r\n      <ST.Footer onSubmit={form.handleSubmit}>\r\n        <Textarea\r\n          name=\"message\"\r\n          value={form.values.message}\r\n          onChange={form.handleChange}\r\n          placeholder=\"Введите сообщение\"\r\n          onEnter={() => onSend(form.values.message)}\r\n        />\r\n        <ST.StyledButton>\r\n          <ST.SendIcon type=\"send\" size={IconSize.XL} />\r\n        </ST.StyledButton>\r\n      </ST.Footer>\r\n    </ST.Wrapper>\r\n  );\r\n}\r\n","import { ChangeEventHandler, FC, useEffect, useMemo, useState } from 'react';\r\nimport * as ST from './styled';\r\nimport { AppLoader, PageHeader } from '@src/components';\r\nimport { IDeleteMessage, IDialogListItem, ISocketMessage } from '@src/api/Dialogs/models';\r\nimport { toastError } from '@src/utils/toast';\r\nimport { DialogsApi } from '@src/api/Dialogs/DialogsApi';\r\nimport { useDebounce, useMessageCallBack, useWindowWidth } from '@src/hooks';\r\nimport { DialogItem } from '@pages/Dialogs/DialogItem';\r\nimport { useDialogsContext } from '@providers/DialogsProvider/DialogsContext';\r\nimport { ActiveDialog } from '@pages/Dialogs/ActiveDialog';\r\nimport { useAuth } from '@providers/AuthProvider';\r\nimport { MessageEvents } from '@src/api/SocketApi/models';\r\n\r\nconst Posts: FC = () => {\r\n  const { user } = useAuth();\r\n  const { newDialog, clearNewDialog, activeDialog, setActiveDialog } = useDialogsContext();\r\n  const [dialogs, setDialogs] = useState<IDialogListItem[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const debouncedSearch = useDebounce(search, 400);\r\n  const windowWidth = useWindowWidth();\r\n\r\n  useEffect(() => {\r\n    if (newDialog) {\r\n      const activeUser = newDialog.users.find(it => it.id !== user?.id);\r\n\r\n      if (activeUser) {\r\n        setActiveDialog({\r\n          id: newDialog.id,\r\n          user: activeUser,\r\n        });\r\n      }\r\n\r\n      clearNewDialog();\r\n    }\r\n  }, [newDialog]);\r\n\r\n  const handleChangeSearch: ChangeEventHandler<HTMLInputElement> = (e) => {\r\n    setSearch(e.target.value);\r\n  }\r\n\r\n  const getDialogs = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const res = await DialogsApi.fetchDialogs();\r\n\r\n      setDialogs(res.data);\r\n    } catch (e) {\r\n      toastError(e);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getDialogs()\r\n  }, [debouncedSearch]);\r\n\r\n  const handleBack = () => {\r\n    setActiveDialog(undefined);\r\n    getDialogs();\r\n  }\r\n\r\n  const showDialogs = useMemo(() => {\r\n    return windowWidth > 1010;\r\n  }, [windowWidth]);\r\n\r\n  const handleClickDialog = (dialog: IDialogListItem) => {\r\n    setActiveDialog(dialog);\r\n    setDialogs(prev => prev.map(it => {\r\n      if (it.id === dialog.id) {\r\n        it.unreadableMessages = 0;\r\n      }\r\n      return { ...it };\r\n    }))\r\n  }\r\n\r\n  useMessageCallBack((message: string) => {\r\n    const parsedMessage = JSON.parse(message) as ISocketMessage;\r\n\r\n    if (parsedMessage.event === MessageEvents.MESSAGE) {\r\n      if (!dialogs.find(it => it.id === parsedMessage.dialogId)) {\r\n        setDialogs(prev => [{ id: parsedMessage.dialogId, user: parsedMessage.user, unreadableMessages: 1, lastMessage: parsedMessage }, ...prev])\r\n      } else {\r\n        setDialogs(prev => prev.map(it => {\r\n          if (it.id === parsedMessage.dialogId && user?.id !== parsedMessage.user.id) {\r\n            if (activeDialog?.id !== parsedMessage.dialogId) {\r\n              it.unreadableMessages += 1;\r\n            }\r\n            it.lastMessage = parsedMessage;\r\n          }\r\n\r\n          if (it.id === parsedMessage.dialogId && user?.id === parsedMessage.user.id) {\r\n            it.lastMessage = { ...parsedMessage, read: true };\r\n          }\r\n          return { ...it };\r\n        }).sort((a, b) => Date.parse(b.lastMessage.updatedAt) - Date.parse(a.lastMessage.updatedAt)))\r\n      }\r\n    }\r\n\r\n    if (parsedMessage.event === MessageEvents.DELETE_MESSAGE) {\r\n      const parsedMessage = JSON.parse(message) as IDeleteMessage;\r\n\r\n      setDialogs(prev => prev.map(it => {\r\n        if (it.id === parsedMessage.dialogId) {\r\n          return {\r\n            ...it,\r\n            lastMessage: parsedMessage.lastMessage,\r\n          }\r\n        }\r\n\r\n        return it;\r\n      }))\r\n    }\r\n  }, [dialogs, user]);\r\n\r\n  const renderedDialogs = useMemo(() => {\r\n    if (isLoading) {\r\n      return (\r\n        <AppLoader />\r\n      )\r\n    }\r\n\r\n    if (!dialogs.length) {\r\n      return (\r\n        <ST.EmptyText>\r\n          Диалогов нет\r\n        </ST.EmptyText>\r\n      );\r\n    }\r\n\r\n    if (activeDialog) {\r\n      return (\r\n        <ST.Content>\r\n          {showDialogs && (\r\n            <ST.ScrollableContent hasActive>\r\n              <ST.DialogsContainer hasActive>\r\n                {dialogs.map(it => <DialogItem key={it.id} dialog={it} onClick={() => handleClickDialog(it)} />)}\r\n              </ST.DialogsContainer>\r\n            </ST.ScrollableContent>\r\n          )}\r\n          <ActiveDialog dialogId={activeDialog.id} user={activeDialog.user} onBack={showDialogs ? undefined : handleBack} />\r\n        </ST.Content>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <ST.Content>\r\n        <ST.ScrollableContent>\r\n          <ST.DialogsContainer>\r\n            {dialogs.map(it => <DialogItem key={it.id} dialog={it} onClick={() => handleClickDialog(it)} />)}\r\n          </ST.DialogsContainer>\r\n        </ST.ScrollableContent>\r\n      </ST.Content>\r\n    )\r\n  }, [dialogs, isLoading, activeDialog, showDialogs]);\r\n\r\n  return (\r\n    <ST.Wrapper>\r\n      <PageHeader title=\"Диалоги\" search={search} onChangeSearch={handleChangeSearch} />\r\n      {renderedDialogs}\r\n    </ST.Wrapper>\r\n  )\r\n}\r\n\r\nexport default Posts;\r\n"],"names":["Buttons","styled","_templateObject","_taggedTemplateLiteral","StyledButton","Button","_templateObject2","Body","_templateObject3","StyledIcon","_templateObject4","COLORS","Content","_templateObject5","Container","_templateObject6","Close","_templateObject7","Title","_templateObject8","DialogTypes","dialogIcons","answer","notification","warning","info","Dialog","_ref","loading","className","title","type","closeHandler","onConfirm","onOk","actions","children","_jsx","Modal","open","closeOnDocumentClick","onClose","_jsxs","ST","onClick","Icon","_Fragment","_objectSpread","submit","variant","WARNING","ButtonVariant","isLoading","disabled","cancel","id","ok","Wrapper","isOwn","_ref2","StyledDropDown","Dropdown","Text","Date","Message","message","user","useAuth","refContainer","useRef","deleteModal","useModalControls","dropdown","useMemo","ref","onContextMenu","e","preventDefault","text","getTimeMessage","updatedAt","isOpen","selectionContainer","current","close","fullWidth","SocketApi","messageId","ScrollableContent","hasActive","DialogsContainer","_ref3","concat","EmptyText","Header","TextShorter","NewMessages","DialogItem","dialog","Avatar","userId","firstName","lastName","src","avatar","size","AvatarSize","tooltip","email","lastMessage","Boolean","unreadableMessages","NewMessage","NewMessageWrapper","Footer","SendIcon","_templateObject9","_templateObject10","ActiveDialog","dialogId","onBack","currentUser","_useState","useState","_useState2","_slicedToArray","setIsLoading","_useState3","_useState4","messages","setMessages","scrollRef","_useState5","_useState6","showNewMessage","setShowNewMessage","form","useFormik","initialValues","onSubmit","values","onSend","resetForm","getDialog","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","wrap","_context","prev","next","DialogsApi","sent","data","t0","toastError","finish","stop","apply","arguments","useMessageCallBack","_scrollRef$current","_scrollRef$current2","_scrollRef$current3","parsedMessage","JSON","parse","event","MessageEvents","_toConsumableArray","scrollHeight","clientHeight","scrollTop","filter","it","scrollToBottom","_scrollRef$current4","_scrollRef$current5","scrollTo","useLayoutEffect","_scrollRef$current9","_scrollRef$current10","_scrollRef$current11","lastMsg","length","scroll","useEffect","renderedContent","AppLoader","map","onScroll","_scrollRef$current6","_scrollRef$current7","_scrollRef$current8","handleSubmit","Textarea","name","value","onChange","handleChange","placeholder","onEnter","IconSize","_useDialogsContext","useDialogsContext","newDialog","clearNewDialog","activeDialog","setActiveDialog","dialogs","setDialogs","search","setSearch","debouncedSearch","useDebounce","windowWidth","useWindowWidth","activeUser","users","find","getDialogs","handleBack","undefined","showDialogs","handleClickDialog","read","sort","a","b","renderedDialogs","PageHeader","onChangeSearch","target"],"sourceRoot":""}