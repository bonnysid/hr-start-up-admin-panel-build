"use strict";(self.webpackChunkhr_start_up_admin_panel=self.webpackChunkhr_start_up_admin_panel||[]).push([[704],{1970:function(n,e,t){t.d(e,{o:function(){return l}});var i=t(4925),s=t(5671),r=t(3144),a=t(46),o=["id"],l=function(){function n(){(0,s.Z)(this,n)}return(0,r.Z)(n,null,[{key:"fetchPosts",value:function(n){return a.e.get("/admin/posts",{params:n})}},{key:"fetchPostDetail",value:function(n){return a.e.get("/admin/posts/".concat(n))}},{key:"banPost",value:function(n){var e=n.id,t=(0,i.Z)(n,o);return a.e.post("/admin/posts/ban/".concat(e),t)}},{key:"unbanPost",value:function(n){return a.e.post("/admin/posts/unban/".concat(n))}},{key:"deletePost",value:function(n){return a.e.delete("/admin/posts/".concat(n))}}]),n}()},5602:function(n,e,t){t.d(e,{L:function(){return i},Z:function(){return s}});var i=function(n){return n.CREATED_AT="createdAt",n.VIEWS="views",n}({}),s=function(n){return n.DESC="desc",n.ASC="asc",n}({})},278:function(n,e,t){t.d(e,{V:function(){return c}});var i,s=t(168),r=t(6444).ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  padding: 4px 6px;\n  border-radius: 6px;\n"]))),a=t(6886),o=t(6031),l=t(184),c=function(n){var e=n.tag;return(0,l.jsx)(r,{style:a.i[(0,o.be)(e.id.slice(-1),a.i.length)],children:e.value})}},5704:function(n,e,t){t.r(e),t.d(e,{default:function(){return An}});var i,s,r,a,o,l,c,u,d,p,x,f,v,h,m,g,Z,j,b,y,w,C,k,P,N,D,E,S,I=t(2791),R=t(168),O=t(6444),W=t(2450),A=O.ZP.div(i||(i=(0,R.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 24px;\n  width: 100%;\n  height: 100%;\n  padding: 24px;\n"]))),G=O.ZP.div(s||(s=(0,R.Z)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-auto-rows: max-content;\n  grid-gap: 14px;\n  width: 100%;\n  height: fit-content;\n  overflow-x: auto;\n"]))),L=O.ZP.div(r||(r=(0,R.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n"]))),M=O.ZP.div(a||(a=(0,R.Z)(["\n  --min-width: 231px;\n  grid-gap: 16px;\n  display: grid;\n  grid-template-columns: 231px 231px 231px 340px;\n  width: 100%;\n  padding: 16px;\n  background: ",";\n  box-shadow: 0 7px 15px rgba(0,0,0,.05);\n  border-radius: 10px;\n"])),W.D.white),z=t(6031),_=O.ZP.div(o||(o=(0,R.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  width: 100%;\n  padding: 10px;\n  border-radius: 5px;\n  border: 1px solid ",";\n  background: ",";\n  cursor: pointer;\n  transition: background-color .3s;\n  border: 1px solid ",";\n\n  &:hover {\n    background: ",";\n  }\n"])),W.D.lightGray40,W.D.white,W.D.lightGray40,W.D.lightGray20),T=O.ZP.div(l||(l=(0,R.Z)(["\n  display: flex;\n  width: 100%;\n  align-items: center;\n  justify-content: space-between;\n"]))),F=O.ZP.div(c||(c=(0,R.Z)(["\n  display: flex;\n  width: fit-content;\n  gap: 10px;\n  align-items: center;\n"]))),V=(O.ZP.div(u||(u=(0,R.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),W.D.gray70),O.ZP.div(d||(d=(0,R.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 15px;\n  font-weight: 500;\n"])))),H=O.ZP.div(p||(p=(0,R.Z)(["\n  display: flex;\n  padding: 5px;\n  border-radius: 5px;\n  font-size: 12px;\n  color: ",";\n  background-color: ",";\n"])),W.D.white,W.D.blue60),J=O.ZP.div(x||(x=(0,R.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),W.D.gray90),q=t(184),U=function(n){var e=n.complaint,t=n.onClick;return(0,q.jsxs)(_,{onClick:t,children:[(0,q.jsxs)(T,{children:[(0,q.jsxs)(V,{children:["# ",e.id,e.unreadableMessages&&(0,q.jsx)(H,{children:e.unreadableMessages})]}),(0,q.jsxs)(F,{children:[(0,q.jsx)(z.Xy,{type:e.type}),(0,q.jsx)(z.dc,{status:e.status})]})]}),(0,q.jsxs)(F,{children:[(0,q.jsx)(z.qE,{firstName:e.author.firstName,lastName:e.author.lastName,src:e.author.avatar,userId:e.author.id}),e.author.lastName," ",e.author.firstName," (",e.author.email,")"]}),(0,q.jsx)(J,{children:e.text})]})},B=t(3433),Q=t(4165),X=t(5861),K=t(9439),Y=t(3131),$=O.ZP.div(f||(f=(0,R.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  min-height: 100%;\n  height: fit-content;\n"]))),nn=O.ZP.div(v||(v=(0,R.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),en=O.ZP.div(h||(h=(0,R.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),tn=(O.ZP.div(m||(m=(0,R.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),O.ZP.div(g||(g=(0,R.Z)(["\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: center;\n"]))),O.ZP.div(Z||(Z=(0,R.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"])))),sn=O.ZP.div(j||(j=(0,R.Z)(["\n  display: flex;\n  align-items: center;\n  padding: 5px;\n  background-color: ",";\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color .3s;\n  \n  &:hover {\n    background-color: ",";\n  }\n"])),W.D.lightGray20,W.D.lightGray50),rn=O.ZP.div(b||(b=(0,R.Z)(["\n  width: 100%;\n  height: 100%;\n  overflow-y: auto;\n  position: relative;\n\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n"]))),an=O.ZP.div(y||(y=(0,R.Z)(["\n  position: absolute;\n  cursor: pointer;\n  bottom: 76px;\n  left: calc(50% - 69px);\n  display: flex;\n  padding: 4px 8px;\n  border-radius: 5px;\n  color: ",";\n  background-color: ",";\n  \n  &:hover {\n    background-color: ",";\n  }\n\n  &:active,\n  &.active {\n    background-color: ",";\n  }\n"])),W.D.lightGray10,W.D.blue60,W.D.blue70,W.D.blue80),on=O.ZP.div(w||(w=(0,R.Z)(["\n  display: flex;\n  position: relative;\n  flex-direction: column;\n  width: 100%;\n  min-height: 500px;\n  height: 100%;\n  max-height: 600px;\n  background-color: ",";\n  border-radius: 8px;\n"])),W.D.lightGray10),ln=O.ZP.div(C||(C=(0,R.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  gap: 10px;\n  width: 100%;\n  height: fit-content;\n  min-height: 100%;\n  padding: 10px;\n"]))),cn=O.ZP.form(k||(k=(0,R.Z)(["\n  display: flex;\n  width: 100%;\n  height: fit-content;\n  gap: 10px;\n  align-items: center;\n  padding: 10px;\n  border-top: 1px solid ",";\n"])),W.D.lightGray40),un=O.ZP.button(P||(P=(0,R.Z)(["\n  background: transparent;\n"]))),dn=(0,O.ZP)(Y.I)(N||(N=(0,R.Z)(["\n  cursor: pointer;\n  color: ",";\n  transition: color .3s;\n  \n  &:hover {\n    color: ",";\n  }\n"])),W.D.gray60,W.D.blue60),pn=(O.ZP.div(D||(D=(0,R.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),W.D.gray70),O.ZP.div(E||(E=(0,R.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),W.D.gray90),t(5457)),xn=t(9514),fn=t(595),vn=t(5859),hn=t(5671),mn=t(3144),gn=t(46),Zn=function(){function n(){(0,hn.Z)(this,n)}return(0,mn.Z)(n,null,[{key:"fetchComplaints",value:function(n){return gn.e.get("/complaints",{params:n})}},{key:"fetchResolveComplaint",value:function(n){return gn.e.post("/complaints/resolve/".concat(n))}},{key:"fetchComplaint",value:function(n){return gn.e.get("/complaints/".concat(n))}},{key:"fetchCloseComplaint",value:function(n){return gn.e.post("/complaints/close/".concat(n))}},{key:"fetchUnresolveComplaint",value:function(n){return gn.e.post("/complaints/unresolve/".concat(n))}}]),n}(),jn=t(4469),bn=t(2375),yn=t(7319),wn=t(5705),Cn=t(9847),kn=t(1219),Pn=t(3494),Nn=t(9973),Dn=function(n){var e=n.onClose,t=n.refetch,i=n.complaintId,s=(0,I.useState)(),r=(0,K.Z)(s,2),a=r[0],o=r[1],l=(0,I.useState)([]),c=(0,K.Z)(l,2),u=c[0],d=c[1],p=(0,Pn.aC)().user,x=(0,I.useState)(!1),f=(0,K.Z)(x,2),v=f[0],h=f[1],m=(0,I.useState)(!1),g=(0,K.Z)(m,2),Z=g[0],j=g[1],b=(0,jn.te)(),y=(0,jn.te)(),w=(0,jn.te)(),C=(0,I.useState)(),k=(0,K.Z)(C,2),P=k[0],N=k[1],D=(0,I.useState)(),E=(0,K.Z)(D,2),S=E[0],R=E[1],O=(0,I.useState)(!1),W=(0,K.Z)(O,2),A=W[0],G=W[1],L=(0,I.useRef)(null),M=function(){var n,e;null===(n=L.current)||void 0===n||n.scrollTo(0,null===(e=L.current)||void 0===e?void 0:e.scrollHeight)},_=(0,wn.TA)({initialValues:{message:""},onSubmit:function(n){J(n.message)}}),T=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var e;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,j(!0),n.next=4,Zn.fetchComplaint(i);case 4:e=n.sent,o(e.data),d(e.data.messages),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,xn._N)(n.t0);case 12:return n.prev=12,j(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),F=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var s;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchResolveComplaint(i);case 4:s=n.sent,(0,xn.x9)(s.data.message),t(),y.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),V=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var s;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchCloseComplaint(i);case 4:s=n.sent,(0,xn.x9)(s.data.message),t(),b.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),H=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var s;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,h(!0),n.next=4,Zn.fetchUnresolveComplaint(i);case 4:s=n.sent,(0,xn.x9)(s.data.message),t(),w.close(),e(),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),(0,xn._N)(n.t0);case 14:return n.prev=14,h(!1),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})));return function(){return n.apply(this,arguments)}}(),J=function(n){Cn.v.sendComplaintMessage({complaintId:i,text:n}),_.resetForm()};(0,I.useEffect)((function(){T()}),[i]),(0,jn.ie)((function(n){var e,t,s,r=JSON.parse(n);r.event===kn.u.COMPLAINT_MESSAGE&&r.complaintId===i&&(d((function(n){return[].concat((0,B.Z)(n),[r])})),r.user.id!==(null===p||void 0===p?void 0:p.id)&&(Cn.v.readMessage({messageId:r.id}),L.current&&(null===(e=L.current)||void 0===e?void 0:e.scrollHeight)-(null===(t=L.current)||void 0===t?void 0:t.clientHeight)-(null===(s=L.current)||void 0===s?void 0:s.scrollTop)>=50&&G(!0)))}),[i,p]),(0,I.useLayoutEffect)((function(){if(L.current){var n,e,t,i=u[u.length-1],s=(null===(n=L.current)||void 0===n?void 0:n.scrollHeight)-(null===(e=L.current)||void 0===e?void 0:e.clientHeight)-(null===(t=L.current)||void 0===t?void 0:t.scrollTop);(i&&i.user.id===(null===p||void 0===p?void 0:p.id)||s<50)&&M()}}),[u]);var U=(0,I.useMemo)((function(){return u.length?u.map((function(n){return(0,q.jsx)(Nn.v,{message:n},n.id)})):"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}),[u]);return(0,q.jsxs)(z.Bm,{titleText:a&&(0,q.jsxs)(nn,{children:[(0,q.jsx)(en,{children:(0,q.jsxs)(z.g2,{tooltip:!0,children:["# ",a.id]})}),(0,q.jsx)(z.Xy,{type:a.type}),(0,q.jsx)(z.dc,{status:a.status})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,q.jsx)($,{children:Z||!a?(0,q.jsx)(z.QP,{}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.bW,{text:"ID:",info:(0,q.jsx)(q.Fragment,{children:a.id})}),(0,q.jsx)(z.bW,{text:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435:",info:(0,q.jsx)(q.Fragment,{children:a.text})}),(0,q.jsx)(z.bW,{text:"\u0410\u0432\u0442\u043e\u0440:",info:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.qE,{firstName:a.author.firstName,lastName:a.author.lastName,src:a.author.avatar,userId:a.author.id}),a.author.lastName," ",a.author.firstName," (",a.author.email,")"]})}),(0,q.jsx)(z.bW,{text:"\u0416\u0430\u043b\u043e\u0431\u0430 \u043d\u0430 ".concat(a.type===vn.pM.POST?"\u043f\u043e\u0441\u0442":"\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",":"),info:a.type===vn.pM.POST?(0,q.jsxs)(sn,{onClick:function(){var n;R(null===a||void 0===a||null===(n=a.post)||void 0===n?void 0:n.id)},children:[a.post.title," (",a.post.id,")"]}):(0,q.jsxs)(sn,{onClick:function(){var n;N(null===a||void 0===a||null===(n=a.user)||void 0===n?void 0:n.id)},children:[(0,q.jsx)(z.qE,{firstName:a.user.firstName,lastName:a.user.lastName,src:a.user.avatar,userId:a.user.id}),a.user.lastName," ",a.user.firstName," (",a.user.email,")"]})}),(0,q.jsx)(z.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,fn.h)(a.createdAt)}),(0,q.jsx)(z.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,fn.h)(a.updatedAt)}),a.whoResolve&&(0,q.jsx)(z.bW,{text:"\u041a\u0442\u043e ".concat(a.status===vn.P5.RESOLVED?"\u0440\u0435\u0448\u0438\u043b":"\u0437\u0430\u043a\u0440\u044b\u043b",":"),info:(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.qE,{firstName:a.whoResolve.firstName,lastName:a.whoResolve.lastName,src:a.whoResolve.avatar,userId:a.whoResolve.id}),a.whoResolve.lastName," ",a.whoResolve.firstName," (",a.whoResolve.email,")"]})}),(0,q.jsxs)(on,{children:[(0,q.jsx)(rn,{ref:L,onScroll:function(){var n,e,t;L.current&&((null===(n=L.current)||void 0===n?void 0:n.scrollHeight)-(null===(e=L.current)||void 0===e?void 0:e.clientHeight)-(null===(t=L.current)||void 0===t?void 0:t.scrollTop)<25&&G(!1))},children:(0,q.jsx)(ln,{children:U})}),A&&(0,q.jsx)(an,{onClick:M,children:"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"}),(0,q.jsxs)(cn,{onSubmit:_.handleSubmit,children:[(0,q.jsx)(z.gx,{name:"message",value:_.values.message,onChange:_.handleChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",onEnter:function(){return J(_.values.message)}}),(0,q.jsx)(un,{children:(0,q.jsx)(dn,{type:"send",size:Y.J.XL})})]})]}),(0,q.jsx)(tn,{children:a.status===vn.P5.RESOLVED||a.status===vn.P5.CLOSED?(0,q.jsx)(z.zx,{fullWidth:!0,text:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c",onClick:w.open}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(z.zx,{fullWidth:!0,onClick:y.open,text:"\u0420\u0435\u0448\u0438\u0442\u044c"}),(0,q.jsx)(z.zx,{fullWidth:!0,onClick:b.open,variant:z.Wu.DANGER,text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"})]})})]})}),y.isOpen&&(0,q.jsxs)(pn.V,{type:pn.w.INFO,closeHandler:y.close,onConfirm:F,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:y.close},submit:{isLoading:v,text:"\u0420\u0435\u0448\u0438\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'" \u0440\u0435\u0448\u0435\u043d\u043d\u043e\u0439?']}),b.isOpen&&(0,q.jsxs)(pn.V,{type:pn.w.WARNING,closeHandler:b.close,onConfirm:V,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:b.close},submit:{isLoading:v,text:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'"?']}),w.isOpen&&(0,q.jsxs)(pn.V,{type:pn.w.WARNING,closeHandler:w.close,onConfirm:H,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:w.close},submit:{isLoading:v,text:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043a\u0440\u044b\u0442\u044c \u0436\u0430\u043b\u043e\u0431\u0443 "',i,'"?']}),P&&(0,q.jsx)(bn.K,{userId:P,onClose:function(){N(void 0)}}),S&&(0,q.jsx)(yn.l,{postId:S,onClose:function(){R(void 0)}})]})},En=t(1413),Sn=t(4942),In=t(5602),Rn=(0,Sn.Z)({},vn.yT.CREATED_AT,(S={},(0,Sn.Z)(S,In.Z.ASC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0441\u0442\u0430\u0440\u044b\u0435"),(0,Sn.Z)(S,In.Z.DESC,"\u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u043d\u043e\u0432\u044b\u0435"),S)),On=Object.values(vn.yT).reduce((function(n,e){return[].concat((0,B.Z)(n),(0,B.Z)(Object.values(In.Z).map((function(n){return{value:"".concat(e,"_").concat(n),label:Rn[e][n],meta:{key:e,value:n}}}))))}),[]),Wn=function(){var n=(0,I.useState)(),e=(0,K.Z)(n,2),t=e[0],i=e[1],s=(0,I.useState)(!0),r=(0,K.Z)(s,2),a=r[0],o=r[1],l=(0,I.useState)([]),c=(0,K.Z)(l,2),u=c[0],d=c[1],p=(0,Pn.aC)().user,x=(0,wn.TA)({initialValues:{sort:On[0]},onSubmit:function(){}}),f=(0,jn.UV)();(0,I.useEffect)((function(){f.getUsers()}),[]),(0,I.useEffect)((function(){v()}),[x.values.users,x.values.status,x.values.sort,x.values.types]),(0,jn.ie)((function(n){var e=JSON.parse(n);e.event===kn.u.COMPLAINT_MESSAGE&&d((function(n){return n.map((function(n){return n.id===e.complaintId&&(null===p||void 0===p?void 0:p.id)!==e.user.id&&(null===t||void 0===t?void 0:t.id)!==e.complaintId&&(n.unreadableMessages+=1),(0,En.Z)({},n)}))}))}),[u,p]);var v=function(){var n=(0,X.Z)((0,Q.Z)().mark((function n(){var e,t,i,s,r,a,l,c;return(0,Q.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o(!0),i=x.values,s=i.users,r=i.status,a=i.sort,l=i.types,n.next=5,Zn.fetchComplaints({user:null===s||void 0===s?void 0:s.value,status:null===r||void 0===r?void 0:r.value,type:null===l||void 0===l?void 0:l.value,sort:null===(e=a.meta)||void 0===e?void 0:e.key,sortValue:null===(t=a.meta)||void 0===t?void 0:t.value});case 5:c=n.sent,d(c.data),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),(0,xn._N)(n.t0);case 12:return n.prev=12,o(!1),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])})));return function(){return n.apply(this,arguments)}}(),h=(0,I.useMemo)((function(){return f.users.map((function(n){return{value:n.id,label:n.email,customize:{avatarSrc:n.avatar,avatarFirstName:n.firstName,avatarLastName:n.lastName}}}))}),[f.users]),m=(0,I.useMemo)((function(){return Object.values(vn.P5).map((function(n){return{value:n,label:n}}))}),[]),g=(0,I.useMemo)((function(){return Object.values(vn.pM).map((function(n){return{value:n,label:z.ab[n]}}))}),[]);return{form:x,activeComplaint:t,setActiveComplaint:function(n){n&&d((function(e){return e.map((function(e){return e.id===n.id?(0,En.Z)((0,En.Z)({},e),{},{unreadableMessages:0}):e}))})),i(n)},usersOptions:h,typesOptions:g,usersRes:f,sortOptions:On,complaints:u,statusOptions:m,createSelectChangeHandler:function(n){return function(e){x.setFieldValue(n,e)}},isLoading:a,getComplaints:v,reset:function(){x.resetForm()}}},An=function(){var n=Wn(),e=n.form,t=n.getComplaints,i=n.complaints,s=n.typesOptions,r=n.usersOptions,a=n.usersRes,o=n.createSelectChangeHandler,l=n.isLoading,c=n.statusOptions,u=n.sortOptions,d=n.reset,p=n.setActiveComplaint,x=n.activeComplaint,f=(0,I.useMemo)((function(){return l?(0,q.jsx)(z.QP,{}):i.length?(0,q.jsx)(G,{children:i.map((function(n){return(0,q.jsx)(U,{complaint:n,onClick:function(){return p(n)}},n.id)}))}):(0,q.jsx)(L,{children:"\u0416\u0430\u043b\u043e\u0431 \u043d\u0435\u0442"})}),[i,l]);return(0,q.jsxs)(A,{children:[(0,q.jsx)(z.mr,{title:"\u0416\u0430\u043b\u043e\u0431\u044b",count:"".concat(i.length," \u0436\u0430\u043b\u043e\u0431")}),(0,q.jsxs)(M,{children:[(0,q.jsx)(z.Ph,{value:e.values.types,options:s,onChange:o("types"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430 \u0447\u0442\u043e \u0436\u0430\u043b\u043e\u0431\u0430"}),(0,q.jsx)(z.Ph,{value:e.values.users,options:r,loading:a.isLoading,onChange:o("users"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0430\u0432\u0442\u043e\u0440\u0430"}),(0,q.jsx)(z.Ph,{value:e.values.status,options:c,onChange:o("status"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,q.jsx)(z.Ph,{value:e.values.sort,options:u,onChange:o("sort"),placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0443"}),(0,q.jsx)(z.zx,{text:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",onClick:d})]}),f,x&&(0,q.jsx)(Dn,{complaintId:x.id,onClose:function(){return p(void 0)},refetch:t})]})}},9973:function(n,e,t){t.d(e,{v:function(){return k}});var i,s,r,a,o,l=t(2791),c=t(168),u=t(6444),d=t(2450),p=t(4075),x=u.ZP.div(i||(i=(0,c.Z)(["\n  display: flex;\n  position: relative;\n  width: 100%;\n  justify-content: ",";\n"])),(function(n){return n.isOwn?"flex-end":"flex-start"})),f=u.ZP.div(s||(s=(0,c.Z)(["\n  display: flex;\n  align-items: flex-end;\n  position: relative;\n  gap: 10px;\n  width: fit-content;\n  height: fit-content;\n  padding: 8px 8px 4px 8px;\n  max-width: calc(50% - 10px);\n  border-radius: 5px;\n  background-color: ",";\n"])),(function(n){return n.isOwn?d.D.blue30:d.D.lightGray30})),v=(0,u.ZP)(p.L)(r||(r=(0,c.Z)(["\n  width: 200px;\n  top: -43px !important;\n  left: -150px;\n  \n  & > div {\n    background: ",";\n  }\n"])),d.D.blue20),h=u.ZP.div(a||(a=(0,c.Z)(["\n  padding-bottom: 5px;\n"]))),m=u.ZP.div(o||(o=(0,c.Z)(["\n  color: ","\n"])),d.D.gray90),g=t(595),Z=t(3494),j=t(6031),b=t(5457),y=t(4469),w=t(9847),C=t(184),k=function(n){var e=n.message,t=(0,Z.aC)().user,i=(0,l.useRef)(null),s=(0,y.te)(),r=(0,y.te)(),a=(0,l.useMemo)((function(){return e.user.id===(null===t||void 0===t?void 0:t.id)}),[e,t]);return(0,C.jsxs)(x,{isOwn:a,children:[(0,C.jsxs)(f,{ref:i,isOwn:a,onContextMenu:function(n){"dialogId"in e&&(n.preventDefault(),a&&r.open())},children:[(0,C.jsx)(h,{children:e.text}),(0,C.jsx)(m,{children:(0,g.B)(e.updatedAt)}),r.isOpen&&(0,C.jsx)(v,{selectionContainer:i.current,onClose:r.close,children:(0,C.jsx)(j.zx,{variant:j.Wu.DANGER,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",fullWidth:!0,onClick:s.open})})]}),s.isOpen&&(0,C.jsx)(b.V,{type:b.w.WARNING,closeHandler:s.close,onConfirm:function(){"dialogId"in e&&(w.v.deleteMessage({messageId:e.id}),s.close())},actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:s.close},submit:{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}},children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?"})]})}},7319:function(n,e,t){t.d(e,{l:function(){return X}});var i,s,r,a,o,l,c,u,d,p,x,f,v,h,m,g=t(4165),Z=t(5861),j=t(9439),b=t(2791),y=t(168),w=t(6444),C=t(2450),k=t(6710),P=w.ZP.div(i||(i=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  grid-row-gap: 18px;\n  width: 100%;\n  min-height: 100%;\n  height: fit-content;\n"]))),N=w.ZP.div(s||(s=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  justify-content: space-between;\n  width: 100%;\n"]))),D=w.ZP.div(r||(r=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  text-align: left;\n"]))),E=w.ZP.div(a||(a=(0,y.Z)(["\n  text-align: center;\n"]))),S=w.ZP.div(o||(o=(0,y.Z)(["\n  font-weight: 600;\n  font-size: 18px;\n  line-height: 24px;\n  letter-spacing: -0.014em;\n"]))),I=(w.ZP.div(l||(l=(0,y.Z)(["\n  display: flex;\n  align-items: center;\n  gap: 10px;\n"]))),w.ZP.div(c||(c=(0,y.Z)(["\n  font-size: 24px;\n"]))),w.ZP.div(u||(u=(0,y.Z)(["\n  display: flex;\n  width: 100%;\n  gap: 10px;\n  align-items: center;\n"])))),R=w.ZP.div(d||(d=(0,y.Z)(["\n  margin-top: auto;\n  display: flex;\n  align-items: center;\n  grid-column-gap: 24px;\n"]))),O=((0,w.ZP)(k.Z)(p||(p=(0,y.Z)(["\n  width: 100% !important;\n"]))),w.ZP.div(x||(x=(0,y.Z)(["\n  font-size: 17px;\n  padding-bottom: 5px;\n  border-bottom: 1px solid ",";\n"])),C.D.lightGray40)),W=w.ZP.div(f||(f=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n"]))),A=w.ZP.div(v||(v=(0,y.Z)(["\n  display: flex;\n  color: ",";\n  width: fit-content;\n  gap: 6px;\n  align-items: center;\n"])),C.D.gray70),G=w.ZP.div(h||(h=(0,y.Z)(["\n  font-size: 14px;\n  color: ",";\n"])),C.D.gray90),L=w.ZP.div(m||(m=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  border-radius: 6px;\n  padding: 6px;\n  color: ",";\n  background-color: ",";\n"])),C.D.red90,C.D.red30),M=t(6031),z=t(7518),_=t(4469),T=t(5457),F=t(9514),V=t(1970),H=t(278),J=t(595),q=t(3131),U=t(3494),B=t(5639),Q=t(184),X=function(n){var e=n.onClose,t=n.refetch,i=n.postId,s=(0,U.aC)().user,r=(0,b.useState)(),a=(0,j.Z)(r,2),o=a[0],l=a[1],c=(0,b.useState)(!1),u=(0,j.Z)(c,2),d=u[0],p=u[1],x=(0,_.te)(),f=(0,_.te)(),v=(0,b.useState)(""),h=(0,j.Z)(v,2),m=h[0],y=h[1],w=(null===s||void 0===s?void 0:s.roles.map((function(n){return n.value})).includes(B.G.ADMIN))||!1,C=(null===o||void 0===o?void 0:o.status)===z.J.ACTIVE,k=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var e;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,V.o.fetchPostDetail(i);case 3:e=n.sent,l(e.data),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),(0,F._N)(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}(),X=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var i,s;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!o){n.next=17;break}if(p(!0),!C){n.next=10;break}return n.next=6,V.o.banPost({id:o.id,text:m});case 6:i=n.sent,(0,F.x9)(i.data.message),n.next=14;break;case 10:return n.next=12,V.o.unbanPost(o.id);case 12:s=n.sent,(0,F.x9)(s.data.message);case 14:null===t||void 0===t||t(),x.close(),e();case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),(0,F._N)(n.t0);case 22:return n.prev=22,p(!1),n.finish(22);case 25:case"end":return n.stop()}}),n,null,[[0,19,22,25]])})));return function(){return n.apply(this,arguments)}}(),K=function(){var n=(0,Z.Z)((0,g.Z)().mark((function n(){var s;return(0,g.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!o){n.next=10;break}return p(!0),n.next=5,V.o.deletePost(i);case 5:s=n.sent,(0,F.x9)(s.data.message),null===t||void 0===t||t(),f.close(),e();case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),(0,F._N)(n.t0);case 15:return n.prev=15,p(!1),n.finish(15);case 18:case"end":return n.stop()}}),n,null,[[0,12,15,18]])})));return function(){return n.apply(this,arguments)}}();return(0,b.useEffect)((function(){k()}),[i]),(0,Q.jsxs)(M.Bm,{titleText:o&&(0,Q.jsxs)(N,{children:[(0,Q.jsx)(S,{children:(0,Q.jsxs)(M.g2,{tooltip:!0,children:[o.title," (",o.id,")"]})}),(0,Q.jsx)(M.qb,{status:o.status}),(0,Q.jsxs)(A,{children:[(0,Q.jsx)(q.I,{type:"eye",size:q.J.LG}),o.views]}),(0,Q.jsxs)(A,{children:[(0,Q.jsx)(q.I,{type:"star-filled",size:q.J.LG}),o.favoriteCount]}),(0,Q.jsxs)(A,{children:[(0,Q.jsx)(q.I,{type:"message",size:q.J.LG}),o.commentsCount]})]}),onClose:e,closeOnDocumentClick:!1,children:[(0,Q.jsx)(P,{children:o?(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(M.bW,{text:"ID:",info:(0,Q.jsx)(Q.Fragment,{children:o.id})}),(0,Q.jsx)(M.bW,{text:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a:",info:(0,Q.jsx)(Q.Fragment,{children:o.title})}),(0,Q.jsx)(M.bW,{text:"\u0410\u0432\u0442\u043e\u0440:",info:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(M.qE,{firstName:o.user.firstName,lastName:o.user.lastName,src:o.user.avatar}),o.user.lastName," ",o.user.firstName," (",o.user.email,")"]})}),(0,Q.jsx)(M.bW,{text:"\u0421\u043e\u0437\u0434\u0430\u043d:",info:(0,J.h)(null===o||void 0===o?void 0:o.createdAt)}),(0,Q.jsx)(M.bW,{text:"\u041e\u0431\u043d\u043e\u0432\u043b\u0435\u043d:",info:(0,J.h)(null===o||void 0===o?void 0:o.updatedAt)}),(0,Q.jsx)(M.bW,{text:"\u0422\u0435\u0433\u0438:",info:(0,Q.jsx)(I,{children:o.tags.map((function(n){return(0,Q.jsx)(H.V,{tag:n},n.id)}))})}),(0,Q.jsx)(M.bW,{text:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,Q.jsx)(G,{children:o.shortDescription})}),(0,Q.jsx)(M.bW,{text:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",info:(0,Q.jsx)(G,{children:o.description})}),o.banReason&&(0,Q.jsx)(M.bW,{text:"\u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438:",info:(0,Q.jsx)(L,{children:o.banReason.text})}),o.banReason&&(0,Q.jsx)(M.bW,{text:"\u041a\u0442\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b:",info:(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(M.qE,{firstName:o.banReason.user.firstName,lastName:o.banReason.user.lastName,src:o.banReason.user.avatar}),o.banReason.user.lastName," ",o.banReason.user.firstName," (",o.banReason.user.email,")"]})}),(0,Q.jsx)(M.Y7,{url:o.videoUrl}),(0,Q.jsxs)(W,{children:[(0,Q.jsx)(O,{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"}),o.comments.map((function(n){return(0,Q.jsx)(M.sv,{comment:n},n.id)}))]}),(0,Q.jsxs)(R,{children:[[z.J.BANNED,z.J.DELETED].includes(o.status)&&w&&(0,Q.jsx)(M.zx,{fullWidth:!0,onClick:f.open,variant:M.Wu.DANGER,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),(0,Q.jsx)(M.zx,{fullWidth:!0,onClick:x.open,variant:C?M.Wu.DANGER:M.Wu.FILLED,text:C?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]})]}):(0,Q.jsx)(M.QP,{})}),x.isOpen&&(0,Q.jsx)(T.V,{type:C?T.w.WARNING:T.w.ANSWER,closeHandler:x.close,onConfirm:X,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:x.close},submit:{isLoading:d,text:C?"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0420\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}},children:(0,Q.jsxs)(D,{children:[(0,Q.jsxs)(E,{children:["\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 ",C?"\u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c",' \u043f\u043e\u0441\u0442 "',null===o||void 0===o?void 0:o.title,'"?']}),C&&(0,Q.jsx)(M.II,{value:m,onChange:function(n){return y(n.target.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443"})]})}),f.isOpen&&(0,Q.jsxs)(T.V,{type:T.w.WARNING,closeHandler:f.close,onConfirm:K,actions:{cancel:{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",onClick:f.close},submit:{isLoading:d,text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}},children:['\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442 "',null===o||void 0===o?void 0:o.title,'"?']})]})}}}]);
//# sourceMappingURL=704.aef81c47.chunk.js.map